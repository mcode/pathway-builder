(this["webpackJsonppathway-builder"]=this["webpackJsonppathway-builder"]||[]).push([[0],{1049:function(e,t,n){e.exports=n.p+"static/media/camino-logo-dark.c8fc712a.png"},1073:function(e,t,n){e.exports=n(1481)},127:function(e,t,n){e.exports={selectButton:"ActionButton_selectButton___qB5R",accept:"ActionButton_accept__28b2D",decline:"ActionButton_decline__zz-vG",smallActionButton:"ActionButton_smallActionButton__1bPWu",largeActionButton:"ActionButton_largeActionButton__blRdA",largeDecline:"ActionButton_largeDecline__wz9Zw",mediumActionButton:"ActionButton_mediumActionButton__3EpOp"}},1480:function(e,t,n){},1481:function(e,t,n){"use strict";n.r(t);n(1074),n(1083);var a=n(33);Object(a.b)();var r=n(0),o=n.n(r),i=n(57),c=n.n(i),l=n(100),u=n(147),d=n(23),s=n(27),m=n(24),b=n(1057),p=n(1543),f=Object(r.createContext)({}),v=Object(r.memo)((function(e){var t=e.children,n=Object(r.useState)(""),a=Object(d.a)(n,2),i=a[0],c=a[1],l=Object(r.useState)(null),u=Object(d.a)(l,2),s=u[0],m=u[1],b=Object(r.useState)(!1),p=Object(d.a)(b,2),v=p[0],h=p[1],g=Object(r.useState)(""),y=Object(d.a)(g,2),E=y[0],C=y[1],O=Object(r.useCallback)((function(){c(""),m(null),h(!1),C("")}),[c,m,h,C]);return o.a.createElement(f.Provider,{value:{buildCriteriaSelected:v,setBuildCriteriaSelected:h,currentCriteriaNodeId:i,setCurrentCriteriaNodeId:c,currentCriteria:s,setCurrentCriteria:m,criteriaName:E,setCriteriaName:C,resetCurrentCriteria:O}},t)})),h=function(){return Object(r.useContext)(f)},g=n(1511),y=n(43),E=n(1056),C=n(256),O=n.n(C),j={spacing:{globalPadding:"2em"}},k={white:"#fff",black:"#222",red:"#d95d77",blue:"#5d89a1",blueLighter:"#9ad2f0",gray:"#4a4a4a",grayMedium:"#bbbdc0",grayBlue:"#cbd5df",grayLight:"#6c6c6c",grayLighter:"#eaeef2",grayDark:"#444",grayVeryDark:"#3a3a3a",green:"#2fa874"},x={fontFamily:["Open Sans","-apple-system","BlinkMacSystemFont","Segoe UI","Roboto","Oxygen","Ubuntu","Cantarell","Fira Sans","Droid Sans","Helvetica Neue","sans-serif"].join(",")},w={MuiButton:{root:{borderRadius:0,height:"38px","&$disabled":{backgroundColor:k.grayMedium,color:k.white}},contained:{"&$disabled":{backgroundColor:k.grayMedium,color:k.white}},label:{fontWeight:600},iconSizeMedium:{"& > *:first-child":{fontSize:14}},iconSizeSmall:{"& > *:first-child":{fontSize:14}}},MuiTableHead:{root:{backgroundColor:k.grayLighter}},MuiTableCell:{root:{fontSize:"1em"},head:{padding:"5px 16px",borderBottom:"none"}},MuiFormControl:{root:{margin:"10px 0"}},MuiFormLabel:{root:{fontStyle:"italic","&.Mui-error":{color:k.white}}},MuiInputBase:{root:{fontWeight:600},input:{"&::selection":{color:k.white,backgroundColor:k.grayDark},"&:-webkit-autofill":{transitionDelay:"9999s",transitionProperty:"background-color, color"}}},MuiTooltip:{tooltip:{fontSize:14,backgroundColor:k.black},arrow:{color:k.black}},MuiOutlinedInput:{root:{borderRadius:"0"}},MuiSelect:{icon:{fontSize:"2em"}},MuiPaper:{rounded:{borderRadius:"0"}},MuiDialogTitle:{root:{padding:"1em"}},MuiDialogContent:{root:{padding:"0 4em"}},MuiDialogActions:{root:{padding:"2em 4em"}},MuiCard:{root:{overflow:"visible"}},MuiIconButton:{root:{"&:disabled":{color:k.grayLight}}}},N={MuiFormControl:{root:{"&:hover":{borderColor:k.white}}},MuiFormLabel:{root:{color:k.white,"&$focused":{color:k.white}}},MuiInputBase:{root:{color:k.white,"&:hover":{borderColor:k.white,backgroundColor:k.grayDark}}},MuiTooltip:{tooltip:{fontSize:14}},MuiOutlinedInput:{root:{"&:hover":{borderColor:k.white},"&:hover $notchedOutline":{borderColor:k.white},"&$focused $notchedOutline":{borderColor:k.white}},notchedOutline:{borderColor:k.white}},MuiSelect:{icon:{color:k.white}},MuiMenuItem:{root:{color:k.grayDark}}},S={primary:{main:k.blue},secondary:{main:k.red},error:{main:k.red},common:k,background:{default:k.grayLighter},text:{primary:k.gray,secondary:k.gray},grey:{800:k.gray}},T=Object(E.a)({typography:Object(y.a)({},x),palette:Object(y.a)({},S),overrides:Object(y.a)({},w),variables:Object(y.a)({},j)}),R=Object(E.a)({typography:Object(y.a)({},x),palette:O()(S,{text:{primary:k.white,secondary:k.white}}),overrides:O()(w,N),variables:Object(y.a)({},j)}),I=Object(E.a)({typography:Object(y.a)({},x),palette:O()(S,{background:{default:k.grayBlue},text:{primary:k.black,secondary:k.black}}),overrides:Object(y.a)({},w),variables:Object(y.a)({},j)}),B=function(e){var t=e.theme;if(e.useProjector)switch(t){case"dark":return R;default:return I}switch(t){case"dark":return R;default:return T}},D=Object(r.createContext)({}),M=Object(r.memo)((function(e){var t=e.theme,n=void 0===t?"light":t,a=e.children,i=Object(r.useState)(!1),c=Object(d.a)(i,2),l=c[0],u=c[1],s=B({theme:n,useProjector:l}),m=Object(r.useCallback)((function(){u((function(e){return!e}))}),[]);return o.a.createElement(g.a,{theme:s},o.a.createElement(D.Provider,{value:{useProjector:l,toggleTheme:m}},a))})),P=n(1049),L=n.n(P),A=n(257),F=n.n(A),z=Object(r.memo)((function(){var e=h().resetCurrentCriteria,t=Object(r.useState)(null),n=Object(d.a)(t,2),a=n[0],i=n[1],c=Object(r.useContext)(D).toggleTheme,u=Object(r.useCallback)((function(e){i(e.currentTarget)}),[]),f=Object(r.useCallback)((function(){i(null)}),[]),v=Object(r.useCallback)((function(){c(),f()}),[c,f]);return o.a.createElement("header",{className:F.a.header},o.a.createElement(l.b,{to:"/",className:F.a.homeLink,onClick:function(){return e()}},o.a.createElement("img",{src:L.a,alt:"logo",className:F.a.logo})),o.a.createElement("button",{onClick:u,"aria-controls":"options-menu","aria-haspopup":"true"},o.a.createElement(s.a,{icon:m.f})),o.a.createElement(b.a,{id:"options-menu",anchorEl:a,keepMounted:!0,open:Boolean(a),onClose:f},o.a.createElement(p.a,{onClick:v},"Toggle Theme")))})),q=n(1517),W=n(1516),_=Object(W.a)((function(e){return{root:{display:"flex",alignItems:"center",padding:"2em",backgroundColor:e.palette.background.default,color:e.palette.text.primary,height:"6em",justifyContent:"space-between"},backButton:{height:"45px",width:"45px"},navigationIcons:{fontSize:"20px",color:e.palette.common.gray,cursor:"pointer"},pathwayName:{fontSize:"1.4em",marginLeft:"1.5em"}}}),{name:"Navigation",index:1});var H=function(e){var t=Object(r.useState)(e),n=Object(d.a)(t,2),a=n[0],o=n[1],i=Object(r.useRef)(a);return Object(r.useEffect)((function(){i.current=a}),[a]),[a,i,o]},U=Object(r.createContext)({}),G=Object(r.memo)((function(e){var t=e.children,n=H(null),a=Object(d.a)(n,3),i=a[0],c=a[1],l=a[2],u=Object(r.useCallback)((function(e){l(e)}),[l]);return o.a.createElement(U.Provider,{value:{pathway:i,pathwayRef:c,setPathway:u}},t)})),K=function(){return Object(r.useContext)(U)},V=n(70),J=n.n(V),Y=n(1539),$=n(184);function X(e){var t=e,n=t.action,a=t.label,r=t.nodeTypeIsUndefined;return void 0===n&&"Start"!==a&&!r}var Q={MedicationRequest:"Medication",ServiceRequest:"Procedure",CarePlan:"Regimen"},Z=[{label:"Medication",value:"MedicationRequest"},{label:"Procedure",value:"ServiceRequest"},{label:"Regimen",value:"CarePlan"},{label:"Observation",value:"Observation"}];function ee(e,t){var n=[];return Object.keys(e.nodes).forEach((function(a){var r,o=Object($.a)(e.nodes[a].transitions);try{for(o.s();!(r=o.n()).done;){if(r.value.transition===t){n.push(a);break}}}catch(i){o.e(i)}finally{o.f()}})),n}function te(e,t){var n=0;return Object.keys(e.nodes).forEach((function(a){e.nodes[a].transitions.forEach((function(e){e.transition===t&&(n+=1)}))})),!(n>=2)}function ne(e,t){var n=!0;return t.forEach((function(t){te(e,t.transition)&&(n=!1)})),n}function ae(e,t,n){var a="/builder/".concat(encodeURIComponent(e),"/node/").concat(encodeURIComponent(t));a!==n.location.pathname&&n.push(a)}var re=n(150),oe=re.R4.LibraryStatusKind._draft,ie=re.R4.PlanDefinitionStatusKind._draft,ce=re.R4.ActivityDefinitionStatusKind._draft,le=re.R4.BundleTypeKind._transaction,ue=re.R4.Bundle_RequestMethodKind._put,de=re.R4.PlanDefinition_ConditionKindKind._applicability,se=re.R4.ExpressionLanguageKind._textCql;function me(e,t,n){return{id:e,title:"Action: ".concat(e),description:t,code:[{coding:[{system:"http://hl7.org/fhir/uv/cpg/CodeSystem/cpg-common-process",code:"guideline-based-care",display:"Guideline-based Care"}]}],definitionCanonical:"http://pathway.com/".concat(n)}}function be(e,t,n,a,r){var o={id:e,resourceType:"PlanDefinition",meta:{profile:["http://hl7.org/fhir/uv/cpg/StructureDefinition/cpg-".concat(a,"definition")]},extension:[{url:"http://hl7.org/fhir/uv/cpg/StructureDefinition/cpg-knowledgeCapability",valueCode:"executable"}],url:"urn:uuid:".concat(e),version:"1.0",name:"PD".concat(e.substring(0,7)),title:t,type:{coding:[{system:"http://terminology.hl7.org/CodeSystem/plan-definition-type",code:"strategy"===a?"workflow-definition":"eca-rule",display:"strategy"===a?"Workflow Definition":"ECA Rule"}]},status:ie,experimental:!0,publisher:"Logged in user",description:n,action:[]};return"strategy"===a&&r&&(o.library=[r]),o}function pe(e){return{fullUrl:"http://pathway.com/".concat(e.id),resource:e,request:{method:ue,url:"/".concat(e.resourceType,"/").concat(e.id)}}}function fe(e){var t,n={id:e.id,resourceType:"Bundle",type:le,entry:[]},a=function(e){var t=Object(Y.a)(),n={id:t,resourceType:"Library",meta:{profile:["http://hl7.org/fhir/uv/cpg/StructureDefinition/cpg-executablelibrary"]},extension:[{url:"http://hl7.org/fhir/uv/cpg/StructureDefinition/cpg-knowledgeCapability",valueCode:"executable"}],url:"urn:uuid:".concat(t),version:"1.0",name:"LIB".concat(t.substring(0,7)),title:"Library for ".concat(e.name),status:oe,experimental:!0,type:{coding:[{system:"http://terminology.hl7.org/CodeSystem/library-type",code:"logic-library",display:"Logic Library"}]},publisher:"Logged in user",description:"ELM library for pathway: ".concat(e.name),content:[]};return e.elm&&n.content.push({id:"navigational",contentType:"application/elm+json",data:btoa(JSON.stringify(e.elm.navigational)),title:"ELM for navigating the pathway"},{id:"precondition",contentType:"application/elm+json",data:btoa(JSON.stringify(e.elm.preconditions)),title:"ELM for pathway preconditions"}),n}(e),r=be(Object(Y.a)(),e.name,null!==(t=e.description)&&void 0!==t?t:"Pathway For: ".concat(e.name),"strategy",a.id);return Object.keys(e.nodes).forEach((function(t){var a=e.nodes[t];if(function(e){return void 0!==e.action}(a)&&a.key){var o="Represents an action for ".concat(a.label),i=be(Object(Y.a)(),a.label,o,"recommendation"),c=me(a.key,a.label,i.id);ee(e,a.key).map((function(t){return e.nodes[t]})).forEach((function(e){var t=e.transitions.find((function(e){return e.transition===a.key}));if(X(e)&&(null===t||void 0===t?void 0:t.condition)){var n,r={kind:de,expression:{language:se,expression:t.condition.cql}};c.condition=c.condition||[],null===(n=c.condition)||void 0===n||n.push(r)}})),a.action.forEach((function(e){var t,a=function(e){var t=Object(Y.a)(),n="Procedure"===e.resource.resourceType?"ServiceRequest":e.resource.resourceType;return{id:t,resourceType:"ActivityDefinition",meta:{profile:["http://hl7.org/fhir/uv/cpg/StructureDefinition/cpg-publishableactivity"]},extension:[{url:"http://hl7.org/fhir/uv/cpg/StructureDefinition/cpg-knowledgeCapability",valueCode:"publishable"}],url:"urn:uuid:".concat(t),version:"1.0",name:"AD".concat(t.substring(0,7)),title:"ActivityDefinition: ".concat(t),status:ce,experimental:!0,date:(new Date).toISOString(),publisher:"Logged in user",description:e.description,kind:n,productCodeableConcept:"MedicationRequest"===e.resource.resourceType?e.resource.medicationCodeableConcept:e.resource.code}}(e),r=me(null!==(t=e.id)&&void 0!==t?t:Object(Y.a)(),e.description,a.id);i.action.push(r),n.entry.push(pe(a))})),r.action.push(c),n.entry.push(pe(i))}})),n.entry.push(pe(a)),n.entry.push(pe(r)),n}function ve(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=he(e,t),a=new Blob([n],{type:"application/json"}),r=window.URL.createObjectURL(a),o=document.createElement("a");o.href=r,o.download="".concat(e.name,".json"),o.click(),window.URL.revokeObjectURL(r)}function he(e,t){if(t)return JSON.stringify(fe(e),void 0,2);var n={library:{identifier:{id:e.id,version:"1.0.0"},schemaIdentifier:{id:"urn:hl7-org:elm",version:"r1"},usings:{def:[{localIdentifier:"System",uri:"urn:hl7-org:elm-types:r1"},{localId:"1",locator:"3:1-3:26",localIdentifier:"FHIR",uri:"http://hl7.org/fhir",version:"4.0.0"}]},statements:{def:[{locator:"13:1-13:15",name:"Patient",context:"Patient",expression:{type:"SingletonFrom",operand:{locator:"13:1-13:15",dataType:"{http://hl7.org/fhir}Patient",type:"Retrieve"}}}]},includes:{def:[]},valueSets:{def:[]},codes:{def:[]},codeSystems:{def:[]}}},r=Object(y.a)({},e,{preconditions:e.preconditions.map((function(e){return Object(y.a)({},e,{id:void 0})})),nodes:Object(y.a)({},e.nodes)});return Object.keys(r.nodes).forEach((function(t){var o=e.nodes[t];if("elm"in o&&o.elm&&o.key){ge(n,o.elm);var i=Object(a.a)(ye(o.elm),(function(e){e.name=o.key}));n.library.statements.def.push(i)}r.nodes[t]=Object(y.a)({},r.nodes[t],{key:void 0,elm:void 0,transitions:o.transitions.map((function(e){var t;if(null===(t=e.condition)||void 0===t?void 0:t.elm){ge(n,e.condition.elm);var r=Object(a.a)(ye(e.condition.elm),(function(t){var n,a;t.name=null!==(n=null===(a=e.condition)||void 0===a?void 0:a.description)&&void 0!==n?n:"Unknown"}));n.library.statements.def.push(r)}return Object(y.a)({},e,{id:void 0,condition:e.condition?Object(y.a)({},e.condition,{elm:void 0,criteriaSource:void 0}):void 0})})),action:null==o.action?void 0:o.action.map((function(e){return Object(y.a)({},e,{id:void 0})}))})})),JSON.stringify(function(e,t){return Object(a.a)(e,(function(e){e.elm||(e.elm={}),e.elm.navigational=t}))}(r,n),void 0,2)}function ge(e,t){var n,a,r,o,i;null===(n=t.library.usings)||void 0===n||n.def.forEach((function(t){var n,a;(null===(n=e.library.usings)||void 0===n?void 0:n.def.find((function(e){return e.uri===t.uri})))||null===(a=e.library.usings)||void 0===a||a.def.push(t)})),null===(a=t.library.includes)||void 0===a||a.def.forEach((function(t){var n,a;(null===(n=e.library.includes)||void 0===n?void 0:n.def.find((function(e){return e.path===t.path})))||null===(a=e.library.includes)||void 0===a||a.def.push(t)})),null===(r=t.library.valueSets)||void 0===r||r.def.forEach((function(t){var n,a;(null===(n=e.library.valueSets)||void 0===n?void 0:n.def.find((function(e){return e.id===t.id})))||null===(a=e.library.valueSets)||void 0===a||a.def.push(t)})),null===(o=t.library.codes)||void 0===o||o.def.forEach((function(t){var n,a;(null===(n=e.library.codes)||void 0===n?void 0:n.def.find((function(e){return e.name===t.name})))||null===(a=e.library.codes)||void 0===a||a.def.push(t)})),null===(i=t.library.codeSystems)||void 0===i||i.def.forEach((function(t){var n,a;(null===(n=e.library.codeSystems)||void 0===n?void 0:n.def.find((function(e){return e.name===t.name})))||null===(a=e.library.codeSystems)||void 0===a||a.def.push(t)}))}function ye(e){var t=["Patient","MeetsInclusionCriteria","InPopulation","Recommendation","Rationale","Errors"];return e.library.statements.def.find((function(e){return!t.includes(e.name)}))}function Ee(e){return e||(e=J.a.generate()),{key:e,label:"New Node",transitions:[],nodeTypeIsUndefined:!0}}function Ce(e,t){return Object(a.a)(e,(function(e){e.nodes[t.key]=t}))}function Oe(e,t,n){switch(n){case"MedicationRequest":return je(Ne(e,t),t,[{type:"create",description:"",id:J.a.generate(),resource:{resourceType:n,medicationCodeableConcept:{coding:[{system:"",code:"",display:""}]}}}]);case"ServiceRequest":return je(Ne(e,t),t,[{type:"create",description:"",id:J.a.generate(),resource:{resourceType:n,code:{coding:[{system:"",code:"",display:""}]}}}]);case"CarePlan":return je(Ne(e,t),t,[{type:"create",description:"",id:J.a.generate(),resource:{resourceType:n,title:""}}]);case"Observation":return function(e,t){return Object(a.a)(e,(function(e){var n=e.nodes[t];void 0===n.cql&&void 0===n.elm&&void 0===n.action&&void 0===n.nodeTypeIsUndefined||(delete n.cql,delete n.elm,delete n.action,delete n.nodeTypeIsUndefined)}))}(e,t);default:return console.error("Unknown nodeType: "+n),e}}function je(e,t,n){return Object(a.a)(e,(function(e){e.nodes[t].action=n}))}function ke(e,t,n){return Object(a.a)(e,(function(e){var a={id:J.a.generate(),transition:n};e.nodes[t].transitions.push(a)}))}function xe(e,t,n,r,o){return Object(a.a)(e,(function(e){var a,i,c=null===(a=e.nodes[t])||void 0===a||null===(i=a.transitions)||void 0===i?void 0:i.find((function(e){return e.id===n}));c&&(c.condition={description:r,cql:o.statement,elm:o.elm,criteriaSource:o.id})}))}function we(e){return!e||e.nodeTypeIsUndefined?"null":e.action||"Start"===e.key?"action":"branch"}function Ne(e,t){return Object(a.a)(e,(function(e){var n=e.nodes[t];void 0===n.cql&&void 0===n.action&&(n.cql="",n.action=[],n.nodeTypeIsUndefined=void 0),n.transitions.forEach((function(e){delete e.condition}))}))}var Se=Object(r.memo)((function(e){var t=e.anchorEl,n=e.closeMenu,a=K().pathway;return o.a.createElement(b.a,{id:"pathway-options-menu",anchorEl:t,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"left"},keepMounted:!0,open:Boolean(t),onClose:n},o.a.createElement(p.a,{onClick:function(){a?ve(a):alert("No pathway to download!"),n()}},"Export Pathway"),o.a.createElement(p.a,{onClick:function(){a?ve(a,!0):alert("No pathway to download!"),n()}},"Export to CPG"))})),Te=function(){var e=h().resetCurrentCriteria,t=Object(r.useState)(null),n=Object(d.a)(t,2),a=n[0],i=n[1],c=K().pathway,l=_(),b=Object(u.g)(),p=Object(r.useCallback)((function(e){i(e.currentTarget)}),[]),f=Object(r.useCallback)((function(){i(null)}),[]),v=Object(r.useCallback)((function(){e(),b.push("/")}),[b,e]);return o.a.createElement("nav",{className:l.root},o.a.createElement("div",null,o.a.createElement(q.a,{className:l.backButton,onClick:v,"aria-label":"go back"},o.a.createElement(s.a,{icon:m.d,className:l.navigationIcons})),o.a.createElement("span",{className:l.pathwayName},null===c||void 0===c?void 0:c.name)),o.a.createElement(q.a,{onClick:p,"aria-controls":"pathway-options-menu","aria-haspopup":"true"},o.a.createElement(s.a,{icon:m.h,className:l.navigationIcons})),o.a.createElement(Se,{anchorEl:a,closeMenu:f}))},Re=n(113),Ie=n(178);var Be=function(e){var t=Object(r.useState)({status:"loading"}),n=Object(d.a)(t,2),a=n[0],o=n[1];return Object(r.useEffect)((function(){(function(e){return fetch(e,{headers:{Accept:"application/json"}})})(e).then((function(e){return e.json()})).then((function(t){return t.map((function(t){return function(e,t){return fetch(e,t).then((function(e){return e.json()}))}(e+"/"+t)}))})).then((function(e){return Promise.all(e)})).then((function(e){return o({status:"loaded",payload:e})})).catch((function(e){return o({status:"error",error:e})}))}),[e]),a},De=Object(r.createContext)({}),Me=Object(r.memo)((function(e){var t=e.children,n=H([]),a=Object(d.a)(n,3),i=a[0],c=a[1],l=a[2],u=Be(Ie.a.get("demoPathwaysService")),s=u.payload,m=Object(r.useCallback)((function(e){l((function(t){return[].concat(Object(Re.a)(t),[e])}))}),[l]),b=Object(r.useCallback)((function(e){l((function(t){return t.filter((function(t){return t.id!==e}))}))}),[l]),p=Object(r.useCallback)((function(e){var t=c.current.findIndex((function(t){return t.id===e.id}));l((function(n){return[].concat(Object(Re.a)(n.slice(0,t)),[e],Object(Re.a)(n.slice(t+1)))}))}),[c,l]);switch(Object(r.useEffect)((function(){s&&l(s)}),[s,l]),u.status){case"error":return o.a.createElement("div",null,"Error loading pathways");default:return o.a.createElement(De.Provider,{value:{pathways:i,addPathway:m,deletePathway:b,updatePathway:p,status:u.status}},t)}})),Pe=function(){return Object(r.useContext)(De)},Le=Object(W.a)((function(e){return{root:{display:"flex",flexDirection:"column",padding:e.variables.spacing.globalPadding,color:e.palette.text.primary,backgroundColor:e.palette.common.gray,width:"33%",minWidth:"550px",overflowY:"scroll"},formControl:{margin:e.spacing(1,0),minWidth:375},divider:{width:"100%"},headerLabelStart:{cursor:"default"},displayText:{margin:"0 0 5px 0",fontWeight:900,fontSize:"1em"},sidebarHeader:{display:"flex",justifyContent:"space-between"},sidebarHeaderGroup:{display:"flex",alignItems:"center"},sidebarHeaderButton:{height:"45px",width:"45px",color:e.palette.text.primary},headerLabelGroup:{display:"flex",cursor:"pointer",height:"60px"},headerLabel:{display:"flex",alignItems:"center",fontSize:"1.6em",fontWeight:700,margin:"0 5px"},headerLabelText:{marginBottom:"5px"},editIcon:{fontSize:"0.6em",marginLeft:"10px"},sidebarButtonGroup:{display:"flex",margin:"10px 0"},sidebarButtonGroupExtraMargin:{display:"flex",margin:"20px 0 10px 0"},sidebarButton:{minWidth:180,marginRight:"20px"},sidebarButtonText:{fontStyle:"italic"},outlinedDiv:{display:"flex",flexDirection:"column",alignItems:"flex-start","& div":{width:"100%"}},outlinedDivError:{borderColor:"".concat(e.palette.error.main," !important"),"&:hover":{borderColor:"".concat(e.palette.error.main," !important")}},toggleSidebar:{display:"inline-flex",alignItems:"center",justifyContent:"center",float:"left",width:"50px",minWidth:"50px",height:"50px",fontSize:"2em",backgroundColor:e.palette.primary.main,color:e.palette.text.primary,"&:hover":{cursor:"pointer"}},cancelButton:{alignSelf:"flex-end",marginTop:"5px",padding:"5px 15px",fontSize:"1em"},buildCriteriaContainer:{display:"flex",justifyContent:"space-between"},buildCriteriaText:{marginTop:"0.5em",marginBottom:"1em"},saveButton:{marginLeft:"1em",backgroundColor:e.palette.error.main,borderColor:e.palette.error.main,"&:hover":{backgroundColor:e.palette.error.main}},transitionContainer:{backgroundColor:e.palette.common.grayVeryDark,padding:"5px 15px",margin:"15px 0"},dividerHeader:{width:"100%",textTransform:"uppercase",borderBottom:"1px solid "+e.palette.common.blueLighter,color:e.palette.common.blueLighter,lineHeight:"0.1em",margin:"10px 0 20px",fontWeight:800,paddingLeft:"15px","& span":{background:e.palette.common.gray,padding:"0 10px"}},dialogCloseButton:{float:"right",width:"45px"},dialogContent:{color:e.palette.common.black,fontSize:"16px",display:"flex",marginTop:"-25px"},dialogContentText:{paddingLeft:"10px",lineHeight:"40px"},alertIcon:{color:e.palette.common.red,fontSize:"40px"},connectDropdown:{margin:"auto",display:"flex",flexDirection:"column",flexWrap:"nowrap",alignContent:"center"},connectText:{display:"flex",flexDirection:"row",alignItems:"center",fontSize:"0.95em",fontStyle:"italic"},cancelButtonDropdown:{marginLeft:"auto",border:"none",alignSelf:"center",color:e.palette.common.blueLighter,fontSize:"1em",fontStyle:"italic",textTransform:"none"}}}),{name:"Sidebar",index:1}),Ae=Object(r.createContext)({}),Fe=Object(r.memo)((function(e){var t=e.children,n=H(null),a=Object(d.a)(n,3),i=a[0],c=a[1],l=a[2],u=Object(r.useCallback)((function(e){l(e)}),[l]);return o.a.createElement(Ae.Provider,{value:{currentNode:i,currentNodeRef:c,setCurrentNode:u}},t)})),ze=function(){return Object(r.useContext)(Ae)},qe=n(1518),We=n(1544),_e=n(1537),He=Object(r.memo)((function(e){var t=e.id,n=e.label,a=e.options,i=e.value,c=e.onChange,l=Object(r.useCallback)((function(e){c&&c(e)}),[c]);return o.a.createElement(qe.a,{variant:"outlined",fullWidth:!0},o.a.createElement(We.a,{id:t,htmlFor:"".concat(t,"-select")},n),o.a.createElement(_e.a,{id:"".concat(t,"-select"),value:i||"",onChange:l,label:n,error:null==i||""===i,MenuProps:{getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},displayEmpty:!0},a.map((function(e){return o.a.createElement(p.a,{key:e.value,value:e.value},e.label)}))))})),Ue=n(1546),Ge=n(1522),Ke=Object(r.createContext)({}),Ve=Object(r.memo)((function(e){var t=e.children,n=Object(r.useState)(!1),a=Object(d.a)(n,2),i=a[0],c=a[1],l=Object(r.useState)("Deleted Successfully"),u=Object(d.a)(l,2),s=u[0],m=u[1],b=Object(r.useCallback)((function(){c(!1)}),[c]);return o.a.createElement(Ke.Provider,{value:{snackbarText:s,openSnackbar:i,handleCloseSnackbar:b,setSnackbarText:m,setOpenSnackbar:c}},t)})),Je=function(){return Object(r.useContext)(Ke)},Ye=Object(r.memo)((function(){var e=Je(),t=e.snackbarText,n=e.openSnackbar,a=e.handleCloseSnackbar;return o.a.createElement(Ue.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},open:n,autoHideDuration:1e4,onClose:a,message:t,action:o.a.createElement(o.a.Fragment,null,o.a.createElement(Ge.a,{color:"secondary",size:"small",onClick:a},"UNDO"),o.a.createElement(q.a,{size:"small","aria-label":"close",color:"inherit",onClick:a},o.a.createElement(s.a,{icon:m.w})))})})),$e=Object(r.memo)((function(){var e=K(),t=e.pathway,n=e.pathwayRef,a=ze(),i=a.currentNode,c=a.currentNodeRef,l=Pe().updatePathway,u=Le(),s=Object(r.useState)(!1),b=Object(d.a)(s,2),p=b[0],f=b[1],v=i&&t?function(e,t){var n,a=[],r=function e(t,n,a){var r=[],o=[],i=t.nodes[a];return i.transitions.forEach((function(a){var c;a.transition===n?r.push(i):(null===(c=o=e(t,n,a.transition))||void 0===c?void 0:c.length)&&(r.some((function(e){return e.key===i.key}))||r.push(i),r=r.concat(o))})),r}(e,null!==(n=t.key)&&void 0!==n?n:"","Start");return r.push(t),Object.keys(e.nodes).forEach((function(n){var o=e.nodes[n],i=t.transitions.some((function(e){return e.transition===n})),c=r.some((function(e){return e.key===n}));i||c||!o.key||a.push({label:o.label,value:o.key})})),a}(t,i):[],h=v.length>0,g=Object(r.useCallback)((function(e){var t,a=null===e||void 0===e?void 0:e.target.value;n.current&&(null===(t=c.current)||void 0===t?void 0:t.key)&&l(ke(n.current,c.current.key,a)),f(!1)}),[l,c,n]),y=Object(r.useCallback)((function(){f(!p)}),[p]);return o.a.createElement("div",null,!p&&o.a.createElement(nt,{buttonName:"Connect Node",buttonIcon:m.m,buttonText:"Create a transition to an existing node in the pathway.",onClick:y,disabled:!h,hasTooltip:!h,tooltipTitle:"There are no possible nodes to connect to."}),p&&h&&o.a.createElement("div",{className:u.connectDropdown},o.a.createElement(He,{id:"transitions",label:"Node To Connect To",options:v,onChange:g}),o.a.createElement("div",{className:u.connectText},"Select node from list to add transition.",o.a.createElement(Ge.a,{className:u.cancelButtonDropdown,size:"small",variant:"text",onClick:y},"Cancel"))))})),Xe=Object(r.memo)((function(){var e=Pe().updatePathway,t=K(),n=t.pathway,a=t.pathwayRef,i=ze(),c=i.currentNode,l=i.currentNodeRef,b=Object(r.useState)(!0),p=Object(d.a)(b,2),f=p[0],v=p[1],h=Le(),g=Object(u.g)(),y=Object(r.useRef)(null),E=Object(r.useCallback)((function(){v(!f)}),[f]),C=Object(r.useCallback)((function(t){var n;(null===(n=l.current)||void 0===n?void 0:n.key)&&a.current&&e(Oe(a.current,l.current.key,t))}),[a,e,l]),O=Object(r.useCallback)((function(e){C((null===e||void 0===e?void 0:e.target.value)||"")}),[C]),j=Object(r.useCallback)((function(){var t;if((null===(t=l.current)||void 0===t?void 0:t.key)&&a.current){var n=Ee(),r=Ce(a.current,n);r=ke(r,l.current.key,n.key),e(r),!X(l.current)&&n.key&&ae(a.current.id,n.key,g)}}),[a,e,l,g]);if(!n)return o.a.createElement("div",null,"Error: No pathway");if(!c)return o.a.createElement("div",null,"Error: No current node");if("Start"===c.key)return o.a.createElement(o.a.Fragment,null,f&&o.a.createElement("div",{className:h.root,ref:y},o.a.createElement(tt,{node:c,isTransition:!1}),o.a.createElement("h5",{className:h.dividerHeader},o.a.createElement(o.a.Fragment,null)," "),o.a.createElement(nt,{buttonName:"Add Node",buttonIcon:m.p,buttonText:"Add a new transition to a new node in the pathway.",onClick:j})),o.a.createElement("div",{className:h.toggleSidebar,onClick:E},o.a.createElement(s.a,{icon:f?m.d:m.e})),o.a.createElement(Ye,null));var k=we(c),x=void 0!==c.key&&("Start"!==c.key||0===c.transitions.length);return o.a.createElement(o.a.Fragment,null,f&&o.a.createElement("div",{className:h.root,ref:y},o.a.createElement(tt,{node:c,isTransition:!1}),o.a.createElement("h5",{className:h.dividerHeader},o.a.createElement("span",null,"Details")),"null"===k&&o.a.createElement(He,{id:"nodeType",label:"Node Type",options:Z,onChange:O,value:""}),"action"===k&&o.a.createElement(it,{changeNodeType:C}),"branch"===k&&o.a.createElement(He,{id:"nodeType",label:"Node Type",options:Z,onChange:O,value:"Observation"}),o.a.createElement("h5",{className:h.dividerHeader},o.a.createElement("span",null,"Transitions")),null===c||void 0===c?void 0:c.transitions.map((function(e){return o.a.createElement(St,{key:e.id,transition:e},"branch"===k&&o.a.createElement(yt,{key:e.id,transition:e}))})),x&&o.a.createElement(o.a.Fragment,null,o.a.createElement(nt,{buttonName:"Add New Node",buttonIcon:m.p,buttonText:"Add a new transition to a new node in the pathway.",onClick:j}),o.a.createElement($e,null))),o.a.createElement("div",{className:h.toggleSidebar,onClick:E},o.a.createElement(s.a,{icon:f?m.d:m.e})),o.a.createElement(Ye,null))})),Qe=n(18),Ze=n(1519),et=n(1540),tt=Object(r.memo)((function(e){var t=e.node,n=e.isTransition,i=void 0!==n&&n,c=Pe().updatePathway,l=Object(r.useState)(!1),b=Object(d.a)(l,2),p=b[0],f=b[1],v=Object(r.useState)(!1),h=Object(d.a)(v,2),g=h[0],y=h[1],E=Object(r.useState)(!1),C=Object(d.a)(E,2),O=C[0],j=C[1],k=ze().currentNodeRef,x=Je(),w=x.setSnackbarText,N=x.setOpenSnackbar,S=K(),T=S.pathway,R=S.pathwayRef,I=Object(r.useRef)(null),B=(null===t||void 0===t?void 0:t.label)||"",D=Le(),M=Object(u.g)(),P=Object(r.useCallback)((function(){if(R.current&&t.key){var e=ee(R.current,t.key);ae(R.current.id,e[0],M)}}),[M,R,t.key]),L=Object(r.useCallback)((function(){R.current&&t.key&&ae(R.current.id,t.key,M)}),[M,R,t.key]),A=Object(r.useCallback)((function(){var e,n,r=null!==(e=null===(n=I.current)||void 0===n?void 0:n.value)&&void 0!==e?e:"";t.key&&R.current&&c(function(e,t,n){return Object(a.a)(e,(function(e){e.nodes[t].label=n}))}(R.current,t.key,r)),f(!1)}),[R,c,t.key]),F=Object(r.useCallback)((function(){f(!0)}),[]),z=Object(r.useCallback)((function(){if(t.key&&R.current&&ne(R.current,t.transitions)){var e=ee(R.current,t.key);c(function(e,t){return Object(a.a)(e,(function(e){delete e.nodes[t],Object.keys(e.nodes).forEach((function(n){e.nodes[n].transitions.forEach((function(a){a.transition===t&&(e.nodes[n].transitions=e.nodes[n].transitions.filter((function(e){return a.id!==e.id})))}))}))}))}(R.current,t.key)),ae(R.current.id,e[0],M),j(!1),w("".concat(t.label," node deleted successfully")),N(!0)}}),[R,c,w,N,t.key,t.label,t.transitions,M]),W=Object(r.useCallback)((function(){var e;t.key&&(null===(e=k.current)||void 0===e?void 0:e.key)&&R.current&&!te(R.current,t.key)&&(c(function(e,t,n){return Object(a.a)(e,(function(e){var a=e.nodes[t].transitions.filter((function(e){return e.transition!==n}));e.nodes[t].transitions=a}))}(R.current,k.current.key,t.key)),j(!1),w("Transition from ".concat(k.current.label," to ").concat(t.label," deleted successfully")),N(!0))}),[R,k,c,w,N,t]),_=Object(r.useCallback)((function(){j(!0)}),[]),H=Object(r.useCallback)((function(){j(!1)}),[]),U=Object(r.useCallback)((function(){y(!0)}),[]),G=Object(r.useCallback)((function(){y(!1)}),[]),V=Object(r.useCallback)((function(e){"Enter"===e.key&&A()}),[A]),J=!T||!ne(T,t.transitions),Y=!T||!t.key||te(T,t.key),$=i?Y:J,X=i?"Deleting this transition would result in an orphaned node. To delete, first add the child node as a transition to another node, or delete it directly.":"Deleting this node would result in an orphaned descendent node. To delete, first add another transition to the would-be orphaned node from another node, or delete it directly.";return o.a.createElement("div",{className:D.sidebarHeader},o.a.createElement("div",{className:D.sidebarHeaderGroup},"Start"!==t.key&&!i&&o.a.createElement(q.a,{className:D.sidebarHeaderButton,onClick:P,"aria-label":"go to parent node"},o.a.createElement(s.a,{icon:m.d})),o.a.createElement("div",{className:D.headerLabelGroup,onClick:F},p&&"Start"!==t.key?o.a.createElement(qe.a,{className:D.formControl,fullWidth:!0},o.a.createElement(Ze.a,{className:D.headerLabel,type:"text",inputRef:I,onBlur:A,onKeyPress:V,defaultValue:B,autoFocus:!0,onFocus:function(e){return e.target.select()}})):o.a.createElement("div",{className:Object(Qe.a)(D.headerLabel,D.headerLabelText,"Start"===t.key&&D.headerLabelStart)},B,"Start"!==t.key&&o.a.createElement(s.a,{className:D.editIcon,icon:m.g})))),o.a.createElement("div",{className:D.sidebarHeaderGroup},"Start"!==t.key&&o.a.createElement(et.a,{placement:"top",open:!!$&&g,onClose:G,onOpen:U,title:X,arrow:!0},o.a.createElement("span",null,o.a.createElement(q.a,{className:D.sidebarHeaderButton,onClick:_,"aria-label":i?"delete transition":"delete node",disabled:$},o.a.createElement(s.a,{icon:m.y})))),i&&o.a.createElement(q.a,{className:D.sidebarHeaderButton,onClick:L,"aria-label":"go to transition node"},o.a.createElement(s.a,{icon:m.e}))),o.a.createElement(wt,{nodeLabel:t.label,isTransition:i,open:O,onDelete:i?W:z,onClose:H}))})),nt=Object(r.memo)((function(e){var t=e.buttonName,n=e.buttonIcon,a=e.buttonText,r=e.extraMargin,i=void 0!==r&&r,c=e.onClick,l=e.hasTooltip,u=void 0!==l&&l,d=e.tooltipTitle,m=void 0===d?"":d,b=e.disabled,p=void 0!==b&&b,f=Le(),v=function(e){var t=e.children;return u?o.a.createElement(et.a,{title:m,placement:"top"},o.a.createElement("span",null,t)):o.a.createElement(o.a.Fragment,null,t)};return o.a.createElement("div",{className:i?f.sidebarButtonGroupExtraMargin:f.sidebarButtonGroup},o.a.createElement(v,null,o.a.createElement(Ge.a,{className:f.sidebarButton,variant:"contained",color:"primary",startIcon:o.a.createElement(s.a,{icon:n}),onClick:c,disabled:p},t)),o.a.createElement("div",{className:f.sidebarButtonText},a))})),at=n(1547),rt=Ie.a.get("cqlToElmWebserviceUrl");var ot=[{label:"ICD-9-CM",value:"http://hl7.org/fhir/sid/icd-9-cm"},{label:"ICD-10-CM",value:"http://hl7.org/fhir/sid/icd-10-cm"},{label:"LOINC",value:"http://loinc.org"},{label:"NCI",value:"http://ncimeta.nci.nih.gov"},{label:"RXNORM",value:"http://www.nlm.nih.gov/research/umls/rxnorm"},{label:"SNOMED",value:"http://snomed.info/sct"}],it=Object(r.memo)((function(e){var t=e.changeNodeType,n=Pe().updatePathway,i=K().pathwayRef,c=ze(),l=c.currentNode,u=c.currentNodeRef,d=Le(),b=Object(r.useCallback)((function(e){t((null===e||void 0===e?void 0:e.target.value)||"")}),[t]),p=Object(r.useCallback)((function(e,t){i.current&&function(e){return fetch(rt,{method:"POST",headers:{"Content-Type":"application/cql",Accept:"application/elm+json"},body:e}).then((function(e){return e.json()}))}(function(e,t){var n=e.resource,a="cql".concat(J.a.generate().replace(/-/g,"a")),r="library ".concat(a," version '1'\nusing FHIR version '4.0.0'\n"),o=function(e){return'codesystem "'.concat(e,"\": '").concat(e,"'\n")},i=function(e){return"return Tuple{ resourceType: '".concat(e,"', id: R.id.value, status: R.status.value}")},c=function(e){return"[".concat(e,': "').concat(a,' code"]')},l=function(){return'define "'.concat(t,'":')};if("MedicationRequest"===n.resourceType){var u=n.medicationCodeableConcept.coding[0];r+=o(u.system),r+='code "'.concat(a," code\": '").concat(escape(u.code),"' from \"").concat(u.system,"\" display '").concat(u.display,"'\n"),r+="".concat(l(),"\n      ").concat(c("MedicationRequest")," R ").concat(i("MedicationRequest"))}else if("ServiceRequest"===n.resourceType){var d=n.code.coding[0];r+=o(d.system),r+='code "'.concat(a," code\": '").concat(escape(d.code),"' from \"").concat(d.system,"\" display '").concat(d.display,"'\n"),r+="".concat(l(),"\n      if exists ").concat(c("Procedure")," \n      then ").concat(c("Procedure")," R ").concat(i("Procedure")," \n      else ").concat(c("ServiceRequest")," R ").concat(i("ServiceRequest"))}else"CarePlan"===n.resourceType?r+="".concat(l(),"\n      [CarePlan] R where R.title.value = '").concat(escape(n.title),"' ").concat(i("CarePlan")):console.error("Auto generating CQL for action - unsupported resource type: "+n.resourceType);return r}(e,t)).then((function(e){n(function(e,t,n){return Object(a.a)(e,(function(e){e.nodes[t].elm=n,e.nodes[t].cql=ye(n).name}))}(i.current,t,e))}))}),[i,n]),f=Object(r.useCallback)((function(e){var t;if((null===(t=u.current)||void 0===t?void 0:t.key)&&i.current){var r=(null===e||void 0===e?void 0:e.target.value)||"",o=Object(a.a)(u.current.action[0],(function(e){e.resource.medicationCodeableConcept?e.resource.medicationCodeableConcept.coding[0].code=r:e.resource.code.coding[0].code=r}));n(je(i.current,u.current.key,[E(o)]))}}),[u,i,n]),v=Object(r.useCallback)((function(e){var t;if((null===(t=u.current)||void 0===t?void 0:t.key)&&i.current){var r=(null===e||void 0===e?void 0:e.target.value)||"",o=Object(a.a)(u.current.action[0],(function(e){e.description=r}));n(je(i.current,u.current.key,[o]))}}),[u,i,n]),h=Object(r.useCallback)((function(e){var t;if((null===(t=u.current)||void 0===t?void 0:t.key)&&i.current){var r=(null===e||void 0===e?void 0:e.target.value)||"",o=Object(a.a)(u.current.action[0],(function(e){e.resource.title=r}));n(je(i.current,u.current.key,[E(o)])),p(o,u.current.key)}}),[u,i,n,p]),g=Object(r.useCallback)((function(e){var t;if((null===(t=u.current)||void 0===t?void 0:t.key)&&i.current){var r=(null===e||void 0===e?void 0:e.target.value)||"",o=Object(a.a)(u.current.action[0],(function(e){e.resource.medicationCodeableConcept?e.resource.medicationCodeableConcept.coding[0].system=r:e.resource.code.coding[0].system=r}));n(je(i.current,u.current.key,[E(o)]))}}),[u,i,n]),y=Object(r.useCallback)((function(){var e;if((null===(e=u.current)||void 0===e?void 0:e.key)&&u.current.action.length&&i.current){var t=function(e,t){return Object(a.a)(e,(function(e){e.resource.medicationCodeableConcept?e.resource.medicationCodeableConcept.coding[0].display=t:e.resource.title?e.resource.description=t:e.resource.code.coding[0].display=t}))}(u.current.action[0],"Example Text");n(je(i.current,u.current.key,[t])),p(t,u.current.key)}else console.error("No Actions -- Cannot Validate")}),[u,i,n,p]),E=function(e){return Object(a.a)(e,(function(e){e.resource.medicationCodeableConcept?e.resource.medicationCodeableConcept.coding[0].display="":"CarePlan"===e.resource.resourceType?e.resource.description="":e.resource.code.coding[0].display=""}))},C=function(e){"Enter"===e.key&&y()},O=void 0!==(null===l||void 0===l?void 0:l.key)&&"Start"!==l.key,j=l.action,k=(null===j||void 0===j?void 0:j.length)>0&&j[0].resource,x="",w="",N="";return"MedicationRequest"===k.resourceType||"ServiceRequest"===k.resourceType?(x=k.code?k.code.coding[0].system:k.medicationCodeableConcept.coding[0].system,w=k.code?k.code.coding[0].code:k.medicationCodeableConcept.coding[0].code,N=k.code?k.code.coding[0].display:k.medicationCodeableConcept.coding[0].display):N=k.description,o.a.createElement(o.a.Fragment,null,O&&o.a.createElement(o.a.Fragment,null,o.a.createElement(He,{id:"nodeType",label:"Node Type",options:Z,onChange:b,value:k.resourceType}),("MedicationRequest"===k.resourceType||"ServiceRequest"===k.resourceType)&&o.a.createElement(o.a.Fragment,null,o.a.createElement(He,{id:"codeSystem",label:"Code System",options:ot,onChange:g,value:x}),x&&o.a.createElement(at.a,{id:"code-input",label:"Code",value:w,onChange:f,variant:"outlined",error:""===w,inputProps:{onKeyPress:C}}),w&&o.a.createElement(o.a.Fragment,null,N?o.a.createElement("div",{className:d.displayText},o.a.createElement(s.a,{icon:m.c})," ",N):o.a.createElement(nt,{buttonName:"Validate",buttonIcon:m.c,buttonText:N||"Check validation of the input system and code",onClick:y}),o.a.createElement(at.a,{id:"description-input",label:"Description",value:j[0].description||"",onChange:v,variant:"outlined",error:""===j[0].description}))),"CarePlan"===k.resourceType&&o.a.createElement(o.a.Fragment,null,o.a.createElement(at.a,{id:"title-input",label:"Title",value:k.title||"",onChange:h,variant:"outlined",error:null==k.title,inputProps:{onKeyPress:C}}),k.title&&o.a.createElement(at.a,{id:"description-input",label:"Description",value:j[0].description||"",onChange:v,variant:"outlined",error:""===j[0].description}))))})),ct=n(1523),lt=n(1536),ut=n(1538),dt=Object(r.createContext)({}),st=["Patient","MeetsInclusionCriteria","InPopulation","Recommendation","Rationale","Errors"];function mt(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.library.statements.def,a=n.filter((function(e){return!st.includes(e.name)}));if(!a)return alert("No elm statement found in that file"),[];var r=t?"Criteria Builder (".concat(e.library.identifier.id.substring(0,5),")"):e.library.identifier.id;return a.map((function(t){return{id:J.a.generate(),label:"".concat(r,": ").concat(t.name),version:e.library.identifier.version,modified:Date.now(),elm:e,statement:t.name}}))}function bt(e){var t,n=JSON.parse(e);if(null===(t=n.library)||void 0===t?void 0:t.identifier)return mt(n);alert("Please upload ELM file")}var pt=Object(r.memo)((function(e){var t=e.children,n=Object(r.useState)([]),a=Object(d.a)(n,2),i=a[0],c=a[1],l=Be(Ie.a.get("demoCriteria")).payload;Object(r.useEffect)((function(){if(l){var e=[];l.forEach((function(t){var n=bt(JSON.stringify(t));n&&e.push.apply(e,Object(Re.a)(n))})),c(e)}}),[l]);var u=Object(r.useCallback)((function(e){var t=new FileReader;t.onload=function(e){var t;if(null===(t=e.target)||void 0===t?void 0:t.result){var n=bt(e.target.result);n&&c((function(e){return[].concat(Object(Re.a)(e),Object(Re.a)(n))}))}else alert("Unable to read that file")},t.readAsText(e)}),[]),s=Object(r.useCallback)((function(e){c((function(t){return t.filter((function(t){return t.id!==e}))}))}),[]),m=Object(r.useCallback)((function(e){var t=mt(e,!0);return c((function(e){return[].concat(Object(Re.a)(e),Object(Re.a)(t))})),t}),[]),b=Object(r.useCallback)((function(e){var t=function(e){return{id:J.a.generate(),label:"".concat(e.type).concat(Date.now()),modified:Date.now(),builder:e,statement:e.cql}}(e);return c((function(e){return[].concat(Object(Re.a)(e),[t])})),[t]}),[]);return o.a.createElement(dt.Provider,{value:{criteria:i,addCriteria:u,deleteCriteria:s,addElmCriteria:m,addBuilderCriteria:b}},t)})),ft=function(){return Object(r.useContext)(dt)},vt=Object(r.createContext)({}),ht=Object(r.memo)((function(e){var t=e.children,n=Object(r.useState)(""),a=Object(d.a)(n,2),i=a[0],c=a[1],l=Object(r.useState)(""),u=Object(d.a)(l,2),s=u[0],m=u[1],b=Object(r.useState)(""),p=Object(d.a)(b,2),f=p[0],v=p[1],h=Object(r.useState)(0),g=Object(d.a)(h,2),y=g[0],E=g[1],C=Object(r.useState)(0),O=Object(d.a)(C,2),j=O[0],k=O[1],x=Object(r.useCallback)((function(){c(""),m(""),v(""),E(0),k(0)}),[c,m,v,E,k]);return o.a.createElement(vt.Provider,{value:{selectedElement:i,selectedDemoElement:s,gender:f,minimumAge:y,maximumAge:j,setSelectedElement:c,setSelectedDemoElement:m,setGender:v,setMinimumAge:E,setMaximumAge:k,resetCriteriaBuilder:x}},t)})),gt=function(){return Object(r.useContext)(vt)},yt=Object(r.memo)((function(e){var t,n,i,c,l,u,b,p=e.transition,f=Pe().updatePathway,v=ft(),g=v.criteria,y=v.addBuilderCriteria,E=h(),C=E.buildCriteriaSelected,O=E.setBuildCriteriaSelected,j=E.currentCriteriaNodeId,k=E.setCurrentCriteriaNodeId,x=E.currentCriteria,w=E.setCurrentCriteria,N=E.criteriaName,S=E.setCriteriaName,T=E.resetCurrentCriteria,R=gt().resetCriteriaBuilder,I=K().pathwayRef,B=ze().currentNodeRef,D=Object(r.useMemo)((function(){return g.map((function(e){return{value:e.id,label:e.label}}))}),[g]),M=D.length>0,P=Le(),L=Object(r.useState)(!1),A=Object(d.a)(L,2),F=A[0],z=A[1],q=null===(t=p.condition)||void 0===t?void 0:t.description,W=null!=q,_=q&&""!==q,H=(null===(n=p.condition)||void 0===n?void 0:n.cql)||(null===(i=p.condition)||void 0===i?void 0:i.description),U=H?"DELETE":"CANCEL",G=H?o.a.createElement(s.a,{icon:m.y}):null,V=M&&(F||(null===(c=p.condition)||void 0===c?void 0:c.cql)||(null===(l=p.condition)||void 0===l?void 0:l.description)),J=Object(r.useRef)(p),Y=Object(r.useCallback)((function(){var e,t,n,r;H&&p.id&&(null===(e=B.current)||void 0===e?void 0:e.key)&&I.current?(f((t=I.current,n=B.current.key,r=p.id,Object(a.a)(t,(function(e){var t=e.nodes[n].transitions.find((function(e){return e.id===r}));t&&delete t.condition})))),z(!1)):z(!F)}),[F,B,I,H,p.id,f]),$=Object(r.useCallback)((function(e){var t,n;if((null===(t=B.current)||void 0===t?void 0:t.key)&&J.current.id&&I.current){var a=(null===e||void 0===e?void 0:e.target.value)||"",r=g.find((function(e){return e.id===a}));if(r){var o=xe(I.current,B.current.key,J.current.id,(null===(n=J.current.condition)||void 0===n?void 0:n.description)||"",r);f(o)}}}),[B,f,I,J,g]),X=Object(r.useCallback)((function(e){var t;if((null===(t=B.current)||void 0===t?void 0:t.key)&&p.id&&I.current){var n,r,o,i,c=(null===e||void 0===e?void 0:e.target.value)||"";f((n=I.current,r=B.current.key,o=p.id,i=c,Object(a.a)(n,(function(e){var t,n,a=null===(t=e.nodes[r])||void 0===t||null===(n=t.transitions)||void 0===n?void 0:n.find((function(e){return e.id===o}));(null===a||void 0===a?void 0:a.condition)?a.condition.description=i:a&&(a.condition={description:i,cql:""})}))))}}),[B,p.id,f,I]),Q=Object(r.useCallback)((function(e){S((null===e||void 0===e?void 0:e.target.value)||"")}),[S]),Z=Object(r.useCallback)((function(){var e;k(null!==(e=p.id)&&void 0!==e?e:""),w(null),S(""),C||O(!0),R()}),[C,k,p,O,w,R,S]),ee=Object(r.useCallback)((function(){T(),R()}),[T,R]),te=Object(r.useCallback)((function(){var e;if((null===(e=B.current)||void 0===e?void 0:e.key)&&J.current.id&&I.current&&(null===x||void 0===x?void 0:x.cql)){var t=y(x),n=xe(I.current,B.current.key,J.current.id,N,t[0]);f(n),ee()}}),[B,f,I,J,x,N,ee,y]),ne=C&&j===p.id;return o.a.createElement(o.a.Fragment,null,!V&&!ne&&o.a.createElement(nt,{buttonName:"Select Criteria",buttonIcon:m.v,buttonText:"Add previously built or imported criteria logic to branch node.",onClick:Y,disabled:!M,hasTooltip:!M,tooltipTitle:"No criteria to select. Add criteria to use."}),V&&!ne&&o.a.createElement(Ct,{label:"Criteria Selector",error:!W||!_},o.a.createElement(o.a.Fragment,null,o.a.createElement(He,{id:"Criteria",label:"Criteria",options:D,onChange:$,value:(null===(u=p.condition)||void 0===u?void 0:u.criteriaSource)||void 0}),o.a.createElement(at.a,{label:"Criteria Display",value:(null===(b=p.condition)||void 0===b?void 0:b.description)||"",variant:"outlined",onChange:X,error:!_})),o.a.createElement(Ge.a,{className:P.cancelButton,color:"inherit",size:"small",variant:"outlined",startIcon:G,onClick:Y},U)),!V&&!ne&&o.a.createElement(nt,{buttonName:"Build Criteria",buttonIcon:m.x,buttonText:"Create new criteria logic to add to branch node.",extraMargin:!0,onClick:Z}),ne&&o.a.createElement(Ct,{label:"Criteria Builder",error:!W||!_},o.a.createElement(at.a,{error:""===N,label:"Criteria Name",variant:"outlined",onChange:Q,value:N,fullWidth:!0}),(null===x||void 0===x?void 0:x.text)&&o.a.createElement("span",{className:P.buildCriteriaText},x.text),o.a.createElement("div",{className:P.buildCriteriaContainer},o.a.createElement(ct.a,{label:o.a.createElement(lt.a,{fontStyle:"italic"},"Add to reusable criteria"),control:o.a.createElement(ut.a,{color:"default"}),checked:!0}),o.a.createElement(Ge.a,{color:"inherit",size:"large",variant:"outlined",onClick:ee},"Cancel"),o.a.createElement(Ge.a,{className:P.saveButton,color:"inherit",size:"large",variant:"outlined",startIcon:o.a.createElement(s.a,{icon:m.s}),disabled:""===N||null===x,onClick:te},"Save"))))})),Et=function(e){var t=e.children;return o.a.createElement(o.a.Fragment,null,t)},Ct=function(e){var t=e.children,n=e.label,a=e.error,r=Le();return o.a.createElement(at.a,{variant:"outlined",label:n,multiline:!0,InputLabelProps:{shrink:!0},InputProps:{inputComponent:Et,classes:{root:Object(Qe.a)(r.outlinedDiv,a&&r.outlinedDivError),notchedOutline:Object(Qe.a)(a&&r.outlinedDivError)}},inputProps:{children:t},fullWidth:!0})},Ot=n(1541),jt=n(1524),kt=n(1525),xt=n(1526),wt=Object(r.memo)((function(e){var t=e.open,n=e.nodeLabel,a=e.isTransition,r=e.onClose,i=e.onDelete,c=Le(),l=ze().currentNode,u=a?o.a.createElement("span",null,"Delete the transition from ",o.a.createElement("strong",null,null===l||void 0===l?void 0:l.label)," to"," ",o.a.createElement("strong",null,n),"? This will not delete either node, just the transition between them."):o.a.createElement("span",null,"Delete the node ",o.a.createElement("strong",null,n),"? This will also remove any transitions to this node.");return o.a.createElement(o.a.Fragment,null,o.a.createElement(Ot.a,{open:t,onClose:r,"aria-labelledby":"create-pathway",fullWidth:!0,maxWidth:"md"},o.a.createElement(jt.a,{disableTypography:!0},o.a.createElement(q.a,{"aria-label":"close",onClick:r,className:c.dialogCloseButton},o.a.createElement(s.a,{icon:m.w}))),o.a.createElement(kt.a,{className:c.dialogContent},o.a.createElement(s.a,{icon:m.i,className:c.alertIcon}),o.a.createElement("p",{className:c.dialogContentText},u)),o.a.createElement(xt.a,null,o.a.createElement(Ge.a,{variant:"text",color:"primary",onClick:r},"Cancel"),o.a.createElement(Ge.a,{variant:"contained",color:"secondary",onClick:i},"Delete"))))})),Nt=n(1527),St=Object(r.memo)((function(e){var t=e.transition,n=e.children,a=Le(),r=K().pathway,i=(null===t||void 0===t?void 0:t.transition)||"",c=null===r||void 0===r?void 0:r.nodes[i];return o.a.createElement(Nt.a,{raised:!0,className:a.transitionContainer},c&&o.a.createElement(tt,{node:c,isTransition:!0}),n)})),Tt=n(1542),Rt=n(1549),It=n(329),Bt=n.n(It),Dt=function(){var e=Object(r.useState)({nodes:{},edges:{}}),t=Object(d.a)(e,2),n=t[0],a=t[1];return{coordinates:n,updateCoordinates:Object(r.useCallback)((function(e){var t,n=e.graph,r=e.graphWidth,o=0-n.node("Start").x+r/2,i=0,c={nodes:{},edges:{}},l=Object($.a)(n.nodes());try{for(l.s();!(t=l.n()).done;){var u=t.value,d=n.node(u);c.nodes[u]=Object(y.a)({},d,{x:d.x-d.width/2+o,y:d.y-d.height/2+16}),i=Math.min(0,i,c.nodes[u].x)}}catch(O){l.e(O)}finally{l.f()}if((i=Math.abs(i))>0){var s,m=Object($.a)(n.nodes());try{for(m.s();!(s=m.n()).done;){var b=s.value;c.nodes[b].x+=i}}catch(O){m.e(O)}finally{m.f()}}var p,f=Object($.a)(n.edges());try{for(f.s();!(p=f.n()).done;){var v=p.value,h=n.edge(v),g="".concat(v.v,", ").concat(v.w),E=h.label?{text:h.label,x:h.x+o,y:h.y+16}:null,C=h.points.map((function(e){return{x:(isNaN(e.x)?0:e.x)+o+i,y:(isNaN(e.y)?0:e.y)+16}}));C.length>0&&(C[C.length-1].y-=17.5),c.edges[g]={label:E,start:v.v,end:v.w,points:C}}}catch(O){f.e(O)}finally{f.f()}a(c)}),[])}},Mt=Object(r.createContext)({}),Pt=Object(r.createContext)((function(){})),Lt=Object(r.createContext)({nodes:{},edges:{}}),At=function(){var e=new Bt.a.graphlib.Graph;return e.setGraph({}),e.setDefaultEdgeLabel((function(){return{}})),e},Ft=function(e){var t=e.children,n=Object(r.useMemo)(At,[]),a=Dt(),i=a.coordinates,c=a.updateCoordinates,l=Object(Tt.a)(0),u=Object(d.a)(l,2),s=u[0],m=u[1],b=Object(r.useState)(!0),p=Object(d.a)(b,2),f=p[0],v=p[1],h=Object(r.useCallback)((function(){return v(!0)}),[]),g=Object(r.useMemo)((function(){return{graph:n,reflow:h}}),[n,h]);return Object(r.useEffect)((function(){f&&(Bt.a.layout(n),c({graph:n,graphWidth:s}),v(!1))}),[n,f,v,s,c]),Object(Rt.a)((function(){v(!0)}),[s]),o.a.createElement(Mt.Provider,{value:g},o.a.createElement(Pt.Provider,{value:m},o.a.createElement(Lt.Provider,{value:i},t)))},zt=function(){return Object(r.useContext)(Mt)},qt=function(){return Object(r.useContext)(Lt)},Wt=Object(W.a)((function(e){return{edges:{display:"block",position:"absolute",top:"0",left:"0",overflow:"visible",width:"100%",height:"100%",zIndex:1,"& text":{fontSize:"18px"},"& #arrowhead-inactive polygon":{fill:e.palette.common.blue},"& #arrowhead-active polygon":{fill:e.palette.common.red}},edge:{stroke:function(t){return e.palette.common[(null===t||void 0===t?void 0:t.isActive)?"red":"blue"]}}}}),{name:"DagreGraph-GraphEdges"}),_t=function(e){var t=e.label,n=e.children;return t.text.length>12?o.a.createElement(et.a,{title:t.text,children:n}):o.a.createElement(o.a.Fragment,null,n)},Ht=function(e){var t,n=e.label,a=e.points,i=e.isActive,c=Wt({isActive:i}),l=Object(r.useMemo)((function(){return function(e){return e.reduce((function(t,n,a){return a%3===e.length%3?"".concat(t," C ").concat(n.x," ").concat(n.y," ").concat(e[a+1].x," ").concat(e[a+1].y," ").concat(e[a+2].x," ").concat(e[a+2].y):t}),"M ".concat(e[0].x," ").concat(e[0].y," "))}(a)}),[a]),u=n&&(null===(t=n.text)||void 0===t?void 0:t.length)>12;return o.a.createElement(o.a.Fragment,null,o.a.createElement("path",{d:l,fill:"transparent",className:c.edge,strokeWidth:"2",markerEnd:"url(#arrowhead-".concat(i?"active":"inactive",")")}),n&&o.a.createElement(_t,{label:n},o.a.createElement("text",{x:n.x,y:n.y},u?"".concat(n.text.substring(0,11),"..."):n.text)))},Ut=Object(r.memo)((function(){var e=Wt(),t=qt().edges,n=ze().currentNode;return o.a.createElement("svg",{className:e.edges},o.a.createElement("defs",null,o.a.createElement("marker",{id:"arrowhead-inactive",markerWidth:"10",markerHeight:"7",refX:"0",refY:"3.5",orient:"auto"},o.a.createElement("polygon",{points:"0 0, 10 3.5, 0 7"})),o.a.createElement("marker",{id:"arrowhead-active",markerWidth:"10",markerHeight:"7",refX:"0",refY:"3.5",orient:"auto"},o.a.createElement("polygon",{points:"0 0, 10 3.5, 0 7"}))),Object.entries(t).map((function(e){var t=Object(d.a)(e,2),a=t[0],r=t[1];return o.a.createElement(Ht,{key:a,label:r.label,points:r.points,isActive:r.start===(null===n||void 0===n?void 0:n.key)})})))})),Gt=n(1528),Kt=Object(W.a)((function(e){return{table:{"& tr":{verticalAlign:"top"}},title:{fontWeight:"bold",textAlign:"right",minWidth:"80px"},description:{paddingLeft:e.spacing(2),fontStyle:"italic",overflowWrap:"break-word"},externalLink:{color:e.palette.common.blue,marginLeft:e.spacing(1),"&:hover, &:focus":{color:e.palette.common.grayDark}}}}),{name:"NodeDetails"}),Vt=function(e){var t=e.title,n=e.description,a=Kt();return n?o.a.createElement("tr",null,o.a.createElement("td",{className:a.title},t),o.a.createElement("td",{className:a.description},n)):null},Jt=function(){return o.a.createElement(Vt,{title:"Type",description:"Observation"})},Yt=function(e){var t,n,a,r,i,c,l=e.actionNode,u=Kt();if(null==(null===(t=l.action)||void 0===t?void 0:t[0]))return null;var d=l.action[0].resource,b=void 0!==d.medicationCodeableConcept?null===d||void 0===d||null===(n=d.medicationCodeableConcept)||void 0===n?void 0:n.coding:null===d||void 0===d||null===(a=d.code)||void 0===a?void 0:a.coding,p=Q[d.resourceType]?Q[d.resourceType]:d.resourceType;return o.a.createElement(o.a.Fragment,null,o.a.createElement(Vt,{title:"Description",description:l.action[0].description}),o.a.createElement(Vt,{key:"Type",title:"Type",description:p}),o.a.createElement(Vt,{key:"System",title:"System",description:(null===b||void 0===b||null===(r=b[0])||void 0===r?void 0:r.system)&&o.a.createElement(o.a.Fragment,null,b[0].system,o.a.createElement("a",{href:b[0].system,target:"_blank",rel:"noopener noreferrer"},o.a.createElement(s.a,{icon:m.j,className:u.externalLink})))}),o.a.createElement(Vt,{key:"Code",title:"Code",description:null===b||void 0===b||null===(i=b[0])||void 0===i?void 0:i.code}),o.a.createElement(Vt,{key:"Display",title:"Display",description:null===b||void 0===b||null===(c=b[0])||void 0===c?void 0:c.display}),o.a.createElement(Vt,{key:"Title",title:"Title",description:d.title}))},$t=Object(r.memo)((function(e){var t=e.pathwayNode,n=Kt(),a=we(t);return null==a?null:o.a.createElement("table",{className:n.table},o.a.createElement("tbody",null,"branch"===a&&o.a.createElement(Jt,null),"action"===a&&o.a.createElement(Yt,{actionNode:t})))})),Xt=Object(W.a)((function(e){return{icon:{marginRight:e.spacing(1),fontSize:"0.9rem"}}}),{name:"DagreGraph-NodeIcon"}),Qt=Object(r.memo)((function(e){var t,n=e.isStartNode,a=e.nodeType,r=e.resourceType,i=Xt();return n?t=m.o:"action"===a&&r?"MedicationRequest"===r?t=m.q:"ServiceRequest"===r?t=m.u:"CarePlan"===r&&(t=m.a):"branch"===a&&(t=m.n),t?o.a.createElement(s.a,{icon:t,className:i.icon}):null})),Zt=Object(W.a)((function(e){return{node:{position:"absolute",width:"auto",minWidth:function(e){return e.isExpanded?"400px":"100px"},maxWidth:"600px",minHeight:"50px",display:"flex",alignItems:"stretch",flexDirection:"column",border:function(t){var n=t.isActionable;return"1px solid ".concat(e.palette.common[n?"red":"blue"])},backgroundColor:e.palette.common.white,zIndex:2,overflow:"hidden"},nodeTitle:{padding:e.spacing(2),flex:"1",display:"flex",alignItems:"center",justifyContent:"center",color:e.palette.common.white,backgroundColor:function(t){var n=t.isActionable;return e.palette.common[n?"red":"blue"]}},nodeContent:{padding:e.spacing(2)},clickable:{cursor:"pointer"}}}),{name:"DagreGraph-Node"}),en=function(e){var t=e.condition;return t?{label:t.description,width:25,height:20}:{}},tn=function(e){var t,n=null!==(t=null===e||void 0===e?void 0:e.getBoundingClientRect())&&void 0!==t?t:{width:0,height:0};return{width:Math.ceil(n.width),height:Math.ceil(n.height)}},nn=Object(r.memo)((function(e){var t,n,a,i,c,l=e.nodeKey,u=e.pathwayNode,s=e.isActionable,m=e.isExpanded,b=e.onClick,p=e.xCoordinate,f=e.yCoordinate,v=e.openNode,h=Zt({isExpanded:m,isActionable:s}),g=Object(r.useCallback)((function(){b&&b(l)}),[b,l]),E=Object(r.useRef)(null),C=zt(),O=C.graph,j=C.reflow,k=Object(r.useMemo)((function(){return{top:"".concat(f,"px"),left:"".concat(p,"px")}}),[p,f]),x=we(u),w=null!==(t=null===(n=u.action)||void 0===n?void 0:n.length)&&void 0!==t?t:0,N=Object(r.useState)(w>0),S=Object(d.a)(N,2),T=S[0],R=S[1],I=u.label,B=u.transitions;return Object(Gt.a)((function(){var e=tn(E.current),t=e.width,n=e.height;O.setNode(l,{width:t,height:n}),B.forEach((function(e){O.setEdge(l,e.transition,en(e))}))}),(function(){O.removeNode(l)})),Object(Rt.a)((function(){if(E.current){var e=tn(E.current),t=e.width,n=e.height,a=O.node(l);a.width===t&&a.height===n||(O.setNode(l,Object(y.a)({},a,{width:t,height:n})),j())}})),Object(Rt.a)((function(){var e,t=new Set(B.map((function(e){return e.transition})));null===(e=O.outEdges(l))||void 0===e||e.forEach((function(e){var n=e.w;t.has(n)||O.removeEdge(l,n)})),B.forEach((function(e){O.setEdge(l,e.transition,en(e))})),j()}),[l,B]),Object(Rt.a)((function(){T||0===w||(R(!0),v(l))}),[T,w,l]),o.a.createElement("div",{className:h.node,style:k,ref:E},o.a.createElement("div",{className:Object(Qe.a)(h.nodeTitle,b&&h.clickable),onClick:g},o.a.createElement(Qt,{resourceType:null===(a=u.action)||void 0===a||null===(i=a[0])||void 0===i||null===(c=i.resource)||void 0===c?void 0:c.resourceType,nodeType:x,isStartNode:"Start"===u.label}),I),m&&o.a.createElement("div",{className:h.nodeContent},o.a.createElement($t,{pathwayNode:u})))})),an=n(148),rn=function(){var e=Object(r.useState)({lastSelectedNode:null}),t=Object(d.a)(e,2),n=t[0],a=t[1];return{expanded:n,toggleExpanded:Object(r.useCallback)((function(e){a("Start"===e?function(t){return Object(y.a)({},t,{lastSelectedNode:e})}:function(t){var n;return Object(y.a)({},t,(n={},Object(an.a)(n,e,t[e]&&t.lastSelectedNode!==e?t[e]:!t[e]),Object(an.a)(n,"lastSelectedNode",e),n))})}),[]),openNode:Object(r.useCallback)((function(e){a((function(t){var n;return t[e]&&t.lastSelectedNode===e?t:Object(y.a)({},t,(n={},Object(an.a)(n,e,!0),Object(an.a)(n,"lastSelectedNode",e),n))}))}),[]),closeNode:Object(r.useCallback)((function(e){a((function(t){return t[e]?Object(y.a)({},t,Object(an.a)({},e,!1)):t}))}),[])}},on=function(){var e=Object(u.h)().id,t=Object(u.g)();return Object(r.useCallback)((function(n){var a="/builder/".concat(encodeURIComponent(e),"/node/").concat(encodeURIComponent(n));a!==t.location.pathname&&t.push(a)}),[t,e])},cn=Object(r.memo)((function(e){var t,n=e.interactive,a=K().pathway,i=rn(),c=i.expanded,l=i.toggleExpanded,u=i.openNode,s=zt().reflow,m=qt().nodes,b=ze().currentNode,p=on(),f=h().resetCurrentCriteria,v=Object(r.useCallback)((function(e){p(e),l(e),f()}),[p,l,f]),g=Object.entries(null!==(t=null===a||void 0===a?void 0:a.nodes)&&void 0!==t?t:{});return Object(Rt.a)((function(){s()}),[g.length]),o.a.createElement(o.a.Fragment,null,g.map((function(e){var t,a=Object(d.a)(e,2),r=a[0],i=a[1],l=null!==(t=m[r])&&void 0!==t?t:{x:-999,y:-999};return o.a.createElement(nn,{key:r,nodeKey:r,pathwayNode:i,isActionable:i.key===(null===b||void 0===b?void 0:b.key),isExpanded:Boolean(c[r]),onClick:n?v:void 0,xCoordinate:l.x,yCoordinate:l.y,openNode:u})})))})),ln=n(1054),un=n.n(ln),dn=Object(W.a)({root:{position:"relative",minWidth:"100%",minHeight:"100%"}},{name:"DagreGraph-GraphRoot"}),sn=function(e){var t=e.children,n=dn(),a=Object(r.useRef)(null),i=Object(r.useContext)(Pt),c=qt().nodes,l=Object(r.useMemo)((function(){return Math.ceil(150+(void 0!==c?Object.values(c).map((function(e){return e.x+e.width})).reduce((function(e,t){return Math.max(e,t)}),0):0))}),[c]),u=Object(r.useMemo)((function(){return Math.ceil(150+(void 0!==c?Object.values(c).map((function(e){return e.y+e.height})).reduce((function(e,t){return Math.max(e,t)}),0):0))}),[c]),d=Object(r.useMemo)((function(){return{width:"".concat(l,"px"),height:"".concat(u,"px")}}),[l,u]);return Object(r.useEffect)((function(){var e=a.current;if(null===e||void 0===e?void 0:e.parentElement){var t=e.parentElement.getBoundingClientRect().width;i(Math.ceil(t));var n=new un.a(e.parentElement,(function(){var t,n,a=(null!==(t=null===e||void 0===e||null===(n=e.parentElement)||void 0===n?void 0:n.getBoundingClientRect())&&void 0!==t?t:{width:0}).width;i(Math.ceil(a))}));return function(){n.detach()}}}),[a,i]),o.a.createElement("div",{ref:a,className:n.root,style:d},t)},mn=Object(r.memo)((function(e){var t=e.interactive,n=void 0===t||t;return o.a.createElement(Ft,null,o.a.createElement(sn,null,o.a.createElement(cn,{interactive:n}),o.a.createElement(Ut,null)))})),bn=Object(W.a)((function(e){return{root:{display:"flex",flexDirection:"column",padding:e.variables.spacing.globalPadding},elementContainer:{padding:"1em",marginRight:"10px",border:"0.1em solid",borderRadius:"0.2em",fontWeight:500,width:"auto",backgroundColor:e.palette.common.grayLighter},elementSelect:{display:"flex",alignItems:"center"},addElementLabel:{marginLeft:"1em",minWidth:"120px"},headerText:{marginRight:"10px",fontStyle:"italic",fontSize:"0.8em"},elementField:{display:"flex",alignItems:"center"},elementFieldLabel:{fontWeight:"bold",marginRight:"1em"}}}),{name:"CriteriaBuilder"}),pn=Object(r.memo)((function(){var e=gt(),t=e.selectedElement,n=e.selectedDemoElement,a=e.gender,i=e.minimumAge,c=e.maximumAge,l=e.setSelectedElement,u=e.setSelectedDemoElement,d=e.setGender,b=e.setMinimumAge,p=e.setMaximumAge,f=e.resetCriteriaBuilder,v=bn(),g=h().setCurrentCriteria,y=Object(r.useCallback)((function(e){l((null===e||void 0===e?void 0:e.target.value)||"")}),[l]),E=Object(r.useCallback)((function(e){u((null===e||void 0===e?void 0:e.target.value)||"")}),[u]),C=Object(r.useCallback)((function(e){d((null===e||void 0===e?void 0:e.target.value)||"")}),[d]),O=Object(r.useCallback)((function(e){b(parseInt(null===e||void 0===e?void 0:e.target.value)||0)}),[b]),j=Object(r.useCallback)((function(e){p(parseInt(null===e||void 0===e?void 0:e.target.value)||0)}),[p]),k=Object(r.useCallback)((function(){f(),g(null)}),[f,g]),x="The patient's gender is ".concat(a),w="The patient's age is between ".concat(i," years and ").concat(c," years");return Object(r.useEffect)((function(){var e="AgeInYears() >= ".concat(i," and AgeInYears() < ").concat(c);"Age Range"===n&&g(i>=0&&c>0&&i<c?{cql:e,text:w,type:"age",min:i,max:c}:null)}),[n,i,c,w,g]),Object(r.useEffect)((function(){var e="Patient.gender.value = '".concat(a,"'");"Gender"===n&&g(""!==a?{cql:e,text:x,type:"gender",gender:a}:null)}),[n,a,x,g]),o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:v.headerText},"Specify criteria to identify a target population that should receive a recommendation from this artifact. Examples might include an age range, gender, presence of a certain condition, or lab results within a specific range."),o.a.createElement("div",{className:v.elementContainer},(""===t||""===n)&&o.a.createElement("div",{className:v.elementSelect},o.a.createElement("div",{className:v.addElementLabel},o.a.createElement(s.a,{icon:m.p})," Add element"),o.a.createElement(He,{id:"Choose Element Type",label:"Choose Element Type",options:[{value:"Demographics",label:"Demographics"}],onChange:y,value:t}),t&&o.a.createElement(He,{id:"Select ".concat(t," element"),label:"Select ".concat(t," element"),options:[{value:"Age Range",label:"Age Range"},{value:"Gender",label:"Gender"}],onChange:E,value:n})),!(""===t||""===n)&&o.a.createElement(o.a.Fragment,null,o.a.createElement("span",null,n),o.a.createElement(q.a,{onClick:k},o.a.createElement(s.a,{icon:m.w})),o.a.createElement("hr",null),"Gender"===n&&o.a.createElement(o.a.Fragment,null,o.a.createElement("span",null,x),o.a.createElement(He,{id:"Select Gender",label:"Gender",options:[{label:"Male",value:"Male"},{label:"Female",value:"Female"},{label:"Other",value:"Other"},{label:"Unknown",value:"Unknown"}],onChange:C,value:a})),"Age Range"===n&&o.a.createElement(o.a.Fragment,null,o.a.createElement("span",null,w),o.a.createElement("div",{className:v.elementField},o.a.createElement("span",{className:v.elementFieldLabel},"Minimum Age:"),o.a.createElement(at.a,{type:"number",value:i,onChange:O})),o.a.createElement("div",{className:v.elementField},o.a.createElement("span",{className:v.elementFieldLabel},"Maximum Age:"),o.a.createElement(at.a,{type:"number",value:c,onChange:j}))))))})),fn=n(48),vn={borderRadius:"0%",marginLeft:"1px",width:"50px",height:"50px"},hn=Object(W.a)((function(e){return{root:{display:"flex",flexDirection:"column",height:"100vh"},main:{flex:"1",display:"flex",alignItems:"stretch",overflowY:"auto"},graph:{"overflow-y":"auto",flex:"1"},graphHeader:{display:"flex",height:"50px",backgroundColor:e.palette.common.white,marginLeft:"1px"},graphHeaderText:{height:"50px",display:"flex",width:"100%",backgroundColor:e.palette.primary.main,alignItems:"center",color:e.palette.common.white,fontSize:"1.4em",paddingLeft:"1.5em"},toggleButton:{"&-on":Object(y.a)({},vn,{backgroundColor:e.palette.primary.main,"&:hover":{backgroundColor:Object(fn.a)(e.palette.primary.main,.1)}}),"&-off":Object(y.a)({},vn,{backgroundColor:e.palette.text.primary,"&:hover":{backgroundColor:Object(fn.a)(e.palette.text.primary,.1)}})},toggleIcon:{transform:"rotate(90deg) scaleY(-1)",color:e.palette.common.white}}}),{name:"Builder",index:1}),gn=Object(r.memo)((function(){var e=hn(),t=K().pathway,n=h().currentCriteriaNodeId,a=function(e){var t=Object(r.useContext)(D).useProjector;return B({theme:e,useProjector:t})}("dark"),i=Object(r.useState)(!0),c=Object(d.a)(i,2),l=c[0],u=c[1],b=Object(r.useCallback)((function(){u(!l)}),[l]);return Object(r.useEffect)((function(){l||""!==n||u(!0)}),[n,l]),o.a.createElement("div",{className:e.root},o.a.createElement("div",null,o.a.createElement(z,null),o.a.createElement(Te,null)),t&&o.a.createElement("div",{className:e.main},o.a.createElement(g.a,{theme:a},o.a.createElement(Xe,null)),o.a.createElement("div",{className:e.graph},""!==n&&o.a.createElement("div",{className:e.graphHeader},o.a.createElement("div",{className:e.graphHeaderText},o.a.createElement("span",null,"Criteria Builder")),o.a.createElement(q.a,{className:"".concat(e.toggleButton,"-").concat(l?"on":"off"),onClick:b},o.a.createElement(s.a,{className:e.toggleIcon,icon:m.r}))),""!==n&&l?o.a.createElement(pn,null):o.a.createElement(mn,null))))})),yn=Object(r.memo)((function(){var e,t=Object(u.h)(),n=t.id,a=t.nodeId,i=Pe().pathways,c=K().setPathway,l=ze().setCurrentNode,d=decodeURIComponent(n),s=Object(r.useMemo)((function(){return i.findIndex((function(e){return e.id===d}))}),[d,i]),m=i[s],b=null===m||void 0===m||null===(e=m.nodes)||void 0===e?void 0:e[decodeURIComponent(a)];return Object(r.useEffect)((function(){c(m)}),[m,c]),Object(r.useEffect)((function(){l(b)}),[b,l]),null==m?null:null==b?o.a.createElement(u.a,{to:"/builder/".concat(n,"/node/Start")}):o.a.createElement(gn,null)})),En=Object(r.createContext)({}),Cn=function(e){var t=e.children,n=Object(r.useState)(null),a=Object(d.a)(n,2),i=a[0],c=a[1];return o.a.createElement(En.Provider,{value:{user:i,setUser:c}},t)},On=n(207),jn=Object(W.a)((function(e){return{root:{display:"flex",flexDirection:"column"},label:{padding:"0.2em 2em",textTransform:"none",fontSize:"1.2em",fontWeight:100}}}),{name:"Tabs",index:1}),kn=Object(r.memo)((function(e){var t=e.tabs,n=jn();return o.a.createElement("div",{className:n.root},o.a.createElement(On.d,null,o.a.createElement(On.b,null,t.map((function(e){return o.a.createElement(On.a,{key:J.a.generate()},o.a.createElement(Ge.a,{classes:{label:n.label}},e.label))}))),t.map((function(e){return o.a.createElement(On.c,{key:J.a.generate()},e.component)}))))})),xn=n(330),wn=n.n(xn),Nn=Object(r.memo)((function(){return o.a.createElement("div",{className:wn.a.root},o.a.createElement(s.a,{icon:m.t,className:wn.a.root,size:"4x",spin:!0}))})),Sn=n(1529),Tn=n(1530),Rn=n(1531),In=n(1532),Bn=n(1533),Dn=n(1534),Mn=n(1535),Pn=Object(W.a)((function(e){return{root:{display:"flex",flexDirection:"column",padding:e.variables.spacing.globalPadding},createPathwayButton:{alignSelf:"flex-end"},pathwayList:{marginTop:"2em"},pathwaysListButton:{marginRight:"1em"},dialogCloseButton:{float:"right",width:"45px"}}}),{name:"PathwaysList",index:1}),Ln=Object(r.memo)((function(e){var t,n,i=e.open,c=e.onClose,l=e.editPathway,d=!l,b=Pn(),p=Object(u.g)(),f=Object(r.useRef)(null),v=Object(r.useRef)(null),h=Pe(),g=h.addPathway,y=h.updatePathway,E=Object(r.useCallback)((function(e){p.push("/builder/".concat(encodeURIComponent(e),"/node/Start")),c()}),[p,c]),C=Object(r.useCallback)((function(e){var t,n,a,r;e.preventDefault();var o=J.a.generate(),i=null!==(t=null===(n=f.current)||void 0===n?void 0:n.value)&&void 0!==t?t:"",c=null!==(a=null===(r=v.current)||void 0===r?void 0:r.value)&&void 0!==a?a:"";g(function(e,t,n){return{id:null!==n&&void 0!==n?n:J.a.generate(),name:e,description:null!==t&&void 0!==t?t:"",library:"",preconditions:[],nodes:{Start:{key:"Start",label:"Start",transitions:[]}}}}(i,c,o)),E(o)}),[g,E]),O=Object(r.useCallback)((function(e){var t,n;if(e.preventDefault(),l&&((null===(t=f.current)||void 0===t?void 0:t.value)!==l.name||(null===(n=v.current)||void 0===n?void 0:n.value)!==l.description)){var r=Object(a.a)(l,(function(e){var t,n,a;(null===(t=f.current)||void 0===t?void 0:t.value)&&(e.name=null===(n=f.current)||void 0===n?void 0:n.value),e.description=null===(a=v.current)||void 0===a?void 0:a.value}));y(r)}c()}),[y,l,c]);if(l){t=l.name;var j=l.description;j&&""!==j&&(n=j)}return o.a.createElement(Ot.a,{open:i,onClose:c,"aria-labelledby":"create-pathway",fullWidth:!0,maxWidth:"md"},o.a.createElement(jt.a,{disableTypography:!0},o.a.createElement(q.a,{"aria-label":"close",onClick:c,className:b.dialogCloseButton},o.a.createElement(s.a,{icon:m.w}))),o.a.createElement("form",{onSubmit:d?C:O},o.a.createElement(kt.a,null,o.a.createElement(at.a,{variant:"outlined",autoFocus:!0,label:"Pathway Name",fullWidth:!0,required:d,inputRef:f,defaultValue:d?void 0:t}),o.a.createElement(at.a,{variant:"outlined",label:"Pathway Description",fullWidth:!0,inputRef:v,defaultValue:d?void 0:n,multiline:!0})),o.a.createElement(xt.a,null,o.a.createElement(Ge.a,{variant:"contained",color:"primary",startIcon:d&&o.a.createElement(s.a,{icon:m.p}),type:"submit"},d?"Create":"Save"))))})),An=n(1512),Fn=n(1521),zn=Object(W.a)((function(e){return{container:{display:"inline-block"},paper:{display:"flex",flexDirection:"row",alignItems:"center",borderRadius:"10px",border:"5px solid rgba(74, 74, 74, 0.5)",backgroundColor:e.palette.common.gray,color:e.palette.common.white,padding:"0.5em",mozBackgroundClip:"padding",webkitBackgroundVlip:"padding",backgroundClip:"padding-box"},displayText:{marginRight:"4em",whiteSpace:"nowrap"},buttons:{display:"flex",alignItems:"center",justifyContent:"center",minWidth:"2.5em",minHeight:"2em",cursor:"pointer",borderRadius:"15%",marginRight:"0.5em"}}}),{name:"ConfirmedDeletionButton"}),qn=n(127),Wn=n.n(qn),_n=function(e){var t=e.type,n=e.onClick;return o.a.createElement("button",{className:"".concat(Wn.a.largeActionButton," button ").concat("decline"===t&&Wn.a.largeDecline),type:"button",onClick:n},t[0].toUpperCase()+t.slice(1))},Hn=function(e){var t=e.type,n=e.onClick;return o.a.createElement("div",{className:"".concat("accept"===t?Wn.a.accept:Wn.a.decline," ").concat(Wn.a.smallActionButton),onClick:n,"data-testid":t},o.a.createElement(s.a,{icon:"accept"===t?m.b:m.w}))},Un=function(e){var t=e.type,n=e.onClick;return o.a.createElement("div",{className:"".concat("accept"===t?Wn.a.accept:Wn.a.decline," ").concat(Wn.a.mediumActionButton),onClick:n,"data-testid":t},o.a.createElement(s.a,{icon:"accept"===t?m.b:m.w}),{accept:"Submit",decline:"Cancel"}[t])},Gn=Object(r.memo)((function(e){var t=e.type,n=e.size,a=e.onClick;switch(n){case"small":return o.a.createElement(Hn,{type:t,onClick:a});case"large":return o.a.createElement(_n,{type:t,onClick:a});case"medium":return o.a.createElement(Un,{type:t,onClick:a})}})),Kn=Object(r.memo)((function(e){var t=e.deleteId,n=e.deleteMethod,a=e.deleteType,i=e.deleteName,c=zn(),l=Object(r.useState)(!1),u=Object(d.a)(l,2),b=u[0],p=u[1],f=Object(r.useState)(null),v=Object(d.a)(f,2),h=v[0],g=v[1],y="Are you sure"+(a&&n?" that you would like to delete the "+i+" "+a+" ?":"?"),E=Object(r.useCallback)((function(e){g(e.currentTarget),p(!0)}),[]),C=Object(r.useCallback)((function(){n(t),p(!1),g(null)}),[t,n]),O=Object(r.useCallback)((function(){p(!1),g(null)}),[]);return o.a.createElement("div",{className:c.container},o.a.createElement(Fn.a,{onClickAway:O},o.a.createElement(Ge.a,{color:"secondary",size:"small",startIcon:o.a.createElement(s.a,{icon:m.y}),onClick:E},"Delete")),o.a.createElement(An.a,{classes:{paper:c.paper},open:b,anchorEl:h,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},o.a.createElement("div",{className:c.displayText}," ",y," "),o.a.createElement("div",{className:c.buttons},o.a.createElement(Gn,{size:"small",type:"accept",onClick:C}),o.a.createElement(Gn,{size:"small",type:"decline",onClick:O}))))})),Vn=Object(r.memo)((function(){var e=Pn(),t=Pe(),n=t.pathways,a=t.deletePathway,i=K().setPathway,c=Object(r.useState)(!1),u=Object(d.a)(c,2),b=u[0],p=u[1],f=Object(r.useState)(),v=Object(d.a)(f,2),h=v[0],g=v[1],y=Object(r.useState)(null),E=Object(d.a)(y,2),C=E[0],O=E[1],j=Object(r.useCallback)((function(e){p(!0),g(e)}),[]),k=Object(r.useCallback)((function(){p(!1)}),[]),x=Object(r.useCallback)((function(e){O(e.currentTarget);var t=n.filter((function(t){return t.id===e.currentTarget.id}));t.length&&i(t[0])}),[n,i]),w=Object(r.useCallback)((function(){O(null)}),[]),N=Object(r.useCallback)((function(e){a(e)}),[a]);return o.a.createElement("div",null,o.a.createElement(Sn.a,{className:e.pathwayList},o.a.createElement(Tn.a,{"aria-label":"pathway list"},o.a.createElement(Rn.a,null,o.a.createElement(In.a,null,o.a.createElement(Bn.a,null,"Pathway Name"),o.a.createElement(Bn.a,null,"Status"),o.a.createElement(Bn.a,null,"Last Updated"),o.a.createElement(Bn.a,null))),o.a.createElement(Dn.a,null,n.map((function(t){return o.a.createElement(In.a,{key:t.id},o.a.createElement(Bn.a,{component:"th",scope:"row"},o.a.createElement(Mn.a,{component:l.b,to:"/builder/".concat(encodeURIComponent(t.id)),color:"primary",underline:"none"},t.name)),o.a.createElement(Bn.a,null,"draft"),o.a.createElement(Bn.a,null,"2 days ago"),o.a.createElement(Bn.a,{align:"right"},o.a.createElement(Ge.a,{className:e.pathwaysListButton,color:"primary",size:"small",startIcon:o.a.createElement(s.a,{icon:m.g}),onClick:function(){return j(t)}},"Edit Info"),o.a.createElement(Ge.a,{id:t.id,className:e.pathwaysListButton,color:"primary",size:"small",startIcon:o.a.createElement(s.a,{icon:m.k}),onClick:x},"Export"),o.a.createElement(Kn,{deleteType:"pathway",deleteName:t.name,deleteId:t.id,deleteMethod:N})))}))))),o.a.createElement(Se,{anchorEl:C,closeMenu:w}),o.a.createElement(Ln,{open:b,onClose:k,editPathway:h}))})),Jn=Object(r.memo)((function(){var e=Pn(),t=Object(r.useState)(!1),n=Object(d.a)(t,2),a=n[0],i=n[1],c=Pe().status,l=Object(r.useCallback)((function(){i(!0)}),[]),u=Object(r.useCallback)((function(){i(!1)}),[]);return o.a.createElement("div",{className:e.root},o.a.createElement(Ge.a,{className:e.createPathwayButton,variant:"contained",color:"primary",startIcon:o.a.createElement(s.a,{icon:m.p}),onClick:l},"Create Pathway"),o.a.createElement(Ln,{open:a,onClose:u}),"loading"===c?o.a.createElement(Nn,null):o.a.createElement(Vn,null))})),Yn=n(1055),$n=n.n(Yn),Xn=Object(W.a)((function(e){return{root:{display:"flex",flexDirection:"column",padding:e.variables.spacing.globalPadding},buttonRow:{display:"flex",justifyContent:"flex-end"},buildCriteriaButton:{alignSelf:"flex-end",marginLeft:"20px"},criteriaList:{marginTop:"2em"},editButton:{marginRight:"1em"},dialogCloseButton:{float:"right",width:"45px"},input:{display:"none"},chooseFileInput:{display:"flex",alignItems:"center"},inputButton:{whiteSpace:"nowrap",marginRight:"1em"},fileName:{fontStyle:"italic"}}}),{name:"CriteriaList",index:1}),Qn=Object(r.memo)((function(){var e=Xn(),t=ft(),n=t.criteria,a=t.deleteCriteria,i=Object(r.useCallback)((function(e){a(e)}),[a]);return o.a.createElement(Sn.a,{className:e.criteriaList},o.a.createElement(Tn.a,{"aria-label":"criteria list"},o.a.createElement(Rn.a,null,o.a.createElement(In.a,null,o.a.createElement(Bn.a,null,"Criteria Name"),o.a.createElement(Bn.a,null,"Version"),o.a.createElement(Bn.a,null,"Added"),o.a.createElement(Bn.a,null))),o.a.createElement(Dn.a,null,n.map((function(t){return o.a.createElement(In.a,{key:t.id},o.a.createElement(Bn.a,{component:"th",scope:"row"},t.label),o.a.createElement(Bn.a,null,t.version),o.a.createElement(Bn.a,null,(n=t.modified,$n()(n).fromNow())),o.a.createElement(Bn.a,{align:"right"},o.a.createElement(Ge.a,{className:e.editButton,color:"primary",size:"small",startIcon:o.a.createElement(s.a,{icon:m.g})},"Edit"),o.a.createElement(Kn,{deleteType:"criterion",deleteName:t.label,deleteId:t.id,deleteMethod:i})));var n})))))})),Zn=Object(r.memo)((function(e){var t=e.open,n=e.onClose,a=Xn(),i=Object(r.useState)(""),c=Object(d.a)(i,2),l=c[0],u=c[1],b=Object(r.useRef)(null),p=ft().addCriteria,f=Object(r.useCallback)((function(e){var t;e.preventDefault();var a=null===b||void 0===b||null===(t=b.current)||void 0===t?void 0:t.files;(null===a||void 0===a?void 0:a.length)&&p(a[0]),n(),u("")}),[p,n]),v=Object(r.useCallback)((function(){var e,t;(null===b||void 0===b||null===(e=b.current)||void 0===e||null===(t=e.files)||void 0===t?void 0:t[0])&&u(b.current.files[0].name)}),[b]);return o.a.createElement(Ot.a,{open:t,onClose:n,"aria-labelledby":"import-criteria",fullWidth:!0,maxWidth:"sm"},o.a.createElement(jt.a,{disableTypography:!0},o.a.createElement(q.a,{"aria-label":"close",onClick:n,className:a.dialogCloseButton},o.a.createElement(s.a,{icon:m.w}))),o.a.createElement("form",{onSubmit:f},o.a.createElement(kt.a,null,o.a.createElement("div",{className:a.chooseFileInput},o.a.createElement(Ze.a,{id:"choose-file-input",className:a.input,inputRef:b,type:"file",inputProps:{accept:".json"},onChange:v}),o.a.createElement("label",{htmlFor:"choose-file-input"},o.a.createElement(Ge.a,{className:a.inputButton,variant:"contained",color:"primary",component:"span"},"Choose File")),o.a.createElement("div",{className:a.fileName},l?o.a.createElement("span",null,l):o.a.createElement("span",null,"Choose ELM file to import.")))),o.a.createElement(xt.a,null,o.a.createElement(Ge.a,{variant:"contained",color:"primary",startIcon:o.a.createElement(s.a,{icon:m.l}),type:"submit"},"Import"))))})),ea=Object(r.memo)((function(){var e=Xn(),t=Pe().status,n=Object(r.useState)(!1),a=Object(d.a)(n,2),i=a[0],c=a[1],l=Object(r.useCallback)((function(){c(!0)}),[]),u=Object(r.useCallback)((function(){c(!1)}),[]);return o.a.createElement("div",{className:e.root},o.a.createElement("div",{className:e.buttonRow},o.a.createElement(Ge.a,{className:e.buildCriteriaButton,variant:"contained",color:"primary",startIcon:o.a.createElement(s.a,{icon:m.l}),onClick:l},"Import Library"),o.a.createElement(Ge.a,{className:e.buildCriteriaButton,variant:"contained",color:"primary",startIcon:o.a.createElement(s.a,{icon:m.x})},"Build Criteria")),o.a.createElement(Zn,{open:i,onClose:u}),"loading"===t?o.a.createElement(Nn,null):o.a.createElement(Qn,null))})),ta=Object(r.memo)((function(){return o.a.createElement(M,{theme:"light"},o.a.createElement(Cn,null,o.a.createElement(G,null,o.a.createElement(Me,null,o.a.createElement(Fe,null,o.a.createElement(pt,null,o.a.createElement(Ve,null,o.a.createElement(v,null,o.a.createElement(ht,null,o.a.createElement(l.a,null,o.a.createElement(u.d,null,o.a.createElement(u.b,{path:"/builder/:id/node/:nodeId"},o.a.createElement(yn,null)),o.a.createElement(u.b,{path:"/builder/:id"},o.a.createElement(yn,null)),o.a.createElement(u.b,{path:"/"},o.a.createElement(z,null),o.a.createElement(kn,{tabs:[{label:"Pathway",component:o.a.createElement(Jn,null)},{label:"Criteria",component:o.a.createElement(ea,null)}]})))))))))))))}));n(1480);c.a.render(o.a.createElement(ta,null),document.getElementById("root"))},178:function(e,t,n){"use strict";(function(e){var a=n(43),r=n(1051),o=n(1052),i=new(function(){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(r.a)(this,t),this.config=e.CONFIG?Object(a.a)({},e.CONFIG,{},n):Object(a.a)({},n)}return Object(o.a)(t,[{key:"get",value:function(e,t){var n=e.split("."),a=this.config,r=null;for(var o in n){a=r=a[n[o]]}return r||t}},{key:"add",value:function(e){e&&(this.config=Object(a.a)({},this.config,{},e))}}]),t}());t.a=i}).call(this,n(120))},257:function(e,t,n){e.exports={logo:"Header_logo__3T0lc",homeLink:"Header_homeLink__2ew4r"}},330:function(e,t,n){e.exports={root:"Loading_root__3b6qy"}}},[[1073,1,2]]]);
//# sourceMappingURL=main.d6de7820.chunk.js.map