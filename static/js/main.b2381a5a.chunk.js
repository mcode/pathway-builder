(this["webpackJsonppathway-builder"]=this["webpackJsonppathway-builder"]||[]).push([[0],{1052:function(e,t,n){e.exports=n.p+"static/media/camino-logo-dark.c8fc712a.png"},1058:function(e,t,n){e.exports={root:"Graph_root__1SJOc"}},1078:function(e,t,n){e.exports=n(1485)},127:function(e,t,n){e.exports={selectButton:"ActionButton_selectButton___qB5R",accept:"ActionButton_accept__28b2D",decline:"ActionButton_decline__zz-vG",smallActionButton:"ActionButton_smallActionButton__1bPWu",largeActionButton:"ActionButton_largeActionButton__blRdA",largeDecline:"ActionButton_largeDecline__wz9Zw",mediumActionButton:"ActionButton_mediumActionButton__3EpOp"}},143:function(e,t,n){"use strict";(function(e){var a=n(55),r=n(1054),o=n(1055),i=new(function(){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(r.a)(this,t),this.config=e.CONFIG?Object(a.a)({},e.CONFIG,{},n):Object(a.a)({},n)}return Object(o.a)(t,[{key:"get",value:function(e,t){var n=e.split("."),a=this.config,r=null;for(var o in n){a=r=a[n[o]]}return r||t}},{key:"add",value:function(e){e&&(this.config=Object(a.a)({},this.config,{},e))}}]),t}());t.a=i}).call(this,n(120))},1484:function(e,t,n){},1485:function(e,t,n){"use strict";n.r(t);n(1079),n(1088);var a=n(0),r=n.n(a),o=n(57),i=n.n(o),c=n(33),l=n(99),u=n(148),d=n(24),s=n(27),m=n(23),p=n(1062),b=n(1545),f=Object(a.createContext)({}),v=Object(a.memo)((function(e){var t=e.children,n=Object(a.useState)(""),o=Object(d.a)(n,2),i=o[0],c=o[1],l=Object(a.useState)(null),u=Object(d.a)(l,2),s=u[0],m=u[1],p=Object(a.useState)(!1),b=Object(d.a)(p,2),v=b[0],h=b[1],g=Object(a.useState)(""),y=Object(d.a)(g,2),E=y[0],C=y[1],O=Object(a.useCallback)((function(){c(""),m(null),h(!1),C("")}),[c,m,h,C]);return r.a.createElement(f.Provider,{value:{buildCriteriaSelected:v,setBuildCriteriaSelected:h,currentCriteriaNodeId:i,setCurrentCriteriaNodeId:c,currentCriteriaCql:s,setCurrentCriteriaCql:m,criteriaName:E,setCriteriaName:C,resetCurrentCriteria:O}},t)})),h=function(){return Object(a.useContext)(f)},g=n(1515),y=n(55),E=n(1061),C=n(258),O=n.n(C),j={spacing:{globalPadding:"2em"}},k={white:"#fff",black:"#222",red:"#d95d77",blue:"#5d89a1",blueLighter:"#9ad2f0",gray:"#4a4a4a",grayMedium:"#bbbdc0",grayBlue:"#cbd5df",grayLight:"#6c6c6c",grayLighter:"#eaeef2",grayDark:"#444",grayVeryDark:"#3a3a3a",green:"#2fa874"},x={fontFamily:["Open Sans","-apple-system","BlinkMacSystemFont","Segoe UI","Roboto","Oxygen","Ubuntu","Cantarell","Fira Sans","Droid Sans","Helvetica Neue","sans-serif"].join(",")},w={MuiButton:{root:{borderRadius:0,height:"38px","&$disabled":{backgroundColor:k.grayMedium,color:k.white}},contained:{"&$disabled":{backgroundColor:k.grayMedium,color:k.white}},label:{fontWeight:600},iconSizeMedium:{"& > *:first-child":{fontSize:14}},iconSizeSmall:{"& > *:first-child":{fontSize:14}}},MuiTableHead:{root:{backgroundColor:k.grayLighter}},MuiTableCell:{root:{fontSize:"1em"},head:{padding:"5px 16px",borderBottom:"none"}},MuiFormControl:{root:{margin:"10px 0"}},MuiFormLabel:{root:{fontStyle:"italic","&.Mui-error":{color:k.white}}},MuiInputBase:{root:{fontWeight:600},input:{"&::selection":{color:k.white,backgroundColor:k.grayDark},"&:-webkit-autofill":{transitionDelay:"9999s",transitionProperty:"background-color, color"}}},MuiTooltip:{tooltip:{fontSize:14,backgroundColor:k.black},arrow:{color:k.black}},MuiOutlinedInput:{root:{borderRadius:"0"}},MuiSelect:{icon:{fontSize:"2em"}},MuiPaper:{rounded:{borderRadius:"0"}},MuiDialogTitle:{root:{padding:"1em"}},MuiDialogContent:{root:{padding:"0 4em"}},MuiDialogActions:{root:{padding:"2em 4em"}},MuiCard:{root:{overflow:"visible"}},MuiIconButton:{root:{"&:disabled":{color:k.grayLight}}}},N={MuiFormControl:{root:{"&:hover":{borderColor:k.white}}},MuiFormLabel:{root:{color:k.white,"&$focused":{color:k.white}}},MuiInputBase:{root:{color:k.white,"&:hover":{borderColor:k.white,backgroundColor:k.grayDark}}},MuiTooltip:{tooltip:{fontSize:14}},MuiOutlinedInput:{root:{"&:hover":{borderColor:k.white},"&:hover $notchedOutline":{borderColor:k.white},"&$focused $notchedOutline":{borderColor:k.white}},notchedOutline:{borderColor:k.white}},MuiSelect:{icon:{color:k.white}},MuiMenuItem:{root:{color:k.grayDark}}},S={primary:{main:k.blue},secondary:{main:k.red},error:{main:k.red},common:k,background:{default:k.grayLighter},text:{primary:k.gray,secondary:k.gray},grey:{800:k.gray}},T=Object(E.a)({typography:Object(y.a)({},x),palette:Object(y.a)({},S),overrides:Object(y.a)({},w),variables:Object(y.a)({},j)}),R=Object(E.a)({typography:Object(y.a)({},x),palette:O()(S,{text:{primary:k.white,secondary:k.white}}),overrides:O()(w,N),variables:Object(y.a)({},j)}),P=Object(E.a)({typography:Object(y.a)({},x),palette:O()(S,{background:{default:k.grayBlue},text:{primary:k.black,secondary:k.black}}),overrides:Object(y.a)({},w),variables:Object(y.a)({},j)}),I=function(e){var t=e.theme;if(e.useProjector)switch(t){case"dark":return R;default:return P}switch(t){case"dark":return R;default:return T}},B=Object(a.createContext)({}),M=Object(a.memo)((function(e){var t=e.theme,n=void 0===t?"light":t,o=e.children,i=Object(a.useState)(!1),c=Object(d.a)(i,2),l=c[0],u=c[1],s=I({theme:n,useProjector:l}),m=Object(a.useCallback)((function(){u((function(e){return!e}))}),[]);return r.a.createElement(g.a,{theme:s},r.a.createElement(B.Provider,{value:{useProjector:l,toggleTheme:m}},o))})),L=n(1052),D=n.n(L),_=n(259),A=n.n(_),z=Object(a.memo)((function(){var e=h().resetCurrentCriteria,t=Object(a.useState)(null),n=Object(d.a)(t,2),o=n[0],i=n[1],c=Object(a.useContext)(B).toggleTheme,u=Object(a.useCallback)((function(e){i(e.currentTarget)}),[]),f=Object(a.useCallback)((function(){i(null)}),[]),v=Object(a.useCallback)((function(){c(),f()}),[c,f]);return r.a.createElement("header",{className:A.a.header},r.a.createElement(l.b,{to:"/",className:A.a.homeLink,onClick:function(){return e()}},r.a.createElement("img",{src:D.a,alt:"logo",className:A.a.logo})),r.a.createElement("button",{onClick:u,"aria-controls":"options-menu","aria-haspopup":"true"},r.a.createElement(s.a,{icon:m.f})),r.a.createElement(p.a,{id:"options-menu",anchorEl:o,keepMounted:!0,open:Boolean(o),onClose:f},r.a.createElement(b.a,{onClick:v},"Toggle Theme")))})),F=n(1521),q=n(1520),W=Object(q.a)((function(e){return{root:{display:"flex",alignItems:"center",padding:"2em",backgroundColor:e.palette.background.default,color:e.palette.text.primary,height:"6em",justifyContent:"space-between"},backButton:{height:"45px",width:"45px"},navigationIcons:{fontSize:"20px",color:e.palette.common.gray,cursor:"pointer"},pathwayName:{fontSize:"1.4em",marginLeft:"1.5em"}}}),{name:"Navigation",index:1});var H=function(e){var t=Object(a.useState)(e),n=Object(d.a)(t,2),r=n[0],o=n[1],i=Object(a.useRef)(r);return Object(a.useEffect)((function(){i.current=r}),[r]),[r,i,o]},U=Object(a.createContext)({}),G=Object(a.memo)((function(e){var t=e.children,n=H(null),o=Object(d.a)(n,3),i=o[0],c=o[1],l=o[2],u=Object(a.useCallback)((function(e){l(e)}),[l]);return r.a.createElement(U.Provider,{value:{pathway:i,pathwayRef:c,setPathway:u}},t)})),K=function(){return Object(a.useContext)(U)},J=n(69),V=n.n(J),Y=n(1542),$=n(184);function X(e){return void 0!==e.action}function Q(e){var t=e,n=t.action,a=t.label,r=t.nodeTypeIsUndefined;return void 0===n&&"Start"!==a&&!r}var Z={MedicationRequest:"Medication",ServiceRequest:"Procedure",CarePlan:"Regimen"},ee=[{label:"Medication",value:"MedicationRequest"},{label:"Procedure",value:"ServiceRequest"},{label:"Regimen",value:"CarePlan"},{label:"Observation",value:"Observation"}];function te(e,t){var n=[];return Object.keys(e.nodes).forEach((function(a){var r,o=Object($.a)(e.nodes[a].transitions);try{for(o.s();!(r=o.n()).done;){if(r.value.transition===t){n.push(a);break}}}catch(i){o.e(i)}finally{o.f()}})),n}function ne(e,t){var n=0;return Object.keys(e.nodes).forEach((function(a){e.nodes[a].transitions.forEach((function(e){e.transition===t&&(n+=1)}))})),!(n>=2)}function ae(e,t){var n=!0;return t.forEach((function(t){ne(e,t.transition)&&(n=!1)})),n}function re(e,t,n){var a="/builder/".concat(encodeURIComponent(e),"/node/").concat(encodeURIComponent(t));a!==n.location.pathname&&n.push(a)}var oe=n(150),ie=oe.R4.LibraryStatusKind._draft,ce=oe.R4.PlanDefinitionStatusKind._draft,le=oe.R4.ActivityDefinitionStatusKind._draft,ue=oe.R4.BundleTypeKind._transaction,de=oe.R4.Bundle_RequestMethodKind._put,se=oe.R4.PlanDefinition_ConditionKindKind._applicability,me=oe.R4.ExpressionLanguageKind._textCql;function pe(e,t,n){return{id:e,title:"Action: ".concat(e),description:t,code:[{coding:[{system:"http://hl7.org/fhir/uv/cpg/CodeSystem/cpg-common-process",code:"guideline-based-care",display:"Guideline-based Care"}]}],definitionCanonical:"http://pathway.com/".concat(n)}}function be(e,t,n,a,r){var o={id:e,resourceType:"PlanDefinition",meta:{profile:["http://hl7.org/fhir/uv/cpg/StructureDefinition/cpg-".concat(a,"definition")]},extension:[{url:"http://hl7.org/fhir/uv/cpg/StructureDefinition/cpg-knowledgeCapability",valueCode:"executable"}],url:"urn:uuid:".concat(e),version:"1.0",name:"PD".concat(e.substring(0,7)),title:t,type:{coding:[{system:"http://terminology.hl7.org/CodeSystem/plan-definition-type",code:"strategy"===a?"workflow-definition":"eca-rule",display:"strategy"===a?"Workflow Definition":"ECA Rule"}]},status:ce,experimental:!0,publisher:"Logged in user",description:n,action:[]};return"strategy"===a&&r&&(o.library=[r]),o}function fe(e){return{fullUrl:"http://pathway.com/".concat(e.id),resource:e,request:{method:de,url:"/".concat(e.resourceType,"/").concat(e.id)}}}function ve(e){var t,n={id:e.id,resourceType:"Bundle",type:ue,entry:[]},a=function(e){var t=Object(Y.a)(),n={id:t,resourceType:"Library",meta:{profile:["http://hl7.org/fhir/uv/cpg/StructureDefinition/cpg-executablelibrary"]},extension:[{url:"http://hl7.org/fhir/uv/cpg/StructureDefinition/cpg-knowledgeCapability",valueCode:"executable"}],url:"urn:uuid:".concat(t),version:"1.0",name:"LIB".concat(t.substring(0,7)),title:"Library for ".concat(e.name),status:ie,experimental:!0,type:{coding:[{system:"http://terminology.hl7.org/CodeSystem/library-type",code:"logic-library",display:"Logic Library"}]},publisher:"Logged in user",description:"ELM library for pathway: ".concat(e.name),content:[]};return e.elm&&n.content.push({id:"navigational",contentType:"application/elm+json",data:btoa(JSON.stringify(e.elm.navigational)),title:"ELM for navigating the pathway"},{id:"precondition",contentType:"application/elm+json",data:btoa(JSON.stringify(e.elm.preconditions)),title:"ELM for pathway preconditions"}),n}(e),r=be(Object(Y.a)(),e.name,null!==(t=e.description)&&void 0!==t?t:"Pathway For: ".concat(e.name),"strategy",a.id);return Object.keys(e.nodes).forEach((function(t){var a=e.nodes[t];if(X(a)&&a.key){var o="Represents an action for ".concat(a.label),i=be(Object(Y.a)(),a.label,o,"recommendation"),c=pe(a.key,a.label,i.id);te(e,a.key).map((function(t){return e.nodes[t]})).forEach((function(e){var t=e.transitions.find((function(e){return e.transition===a.key}));if(Q(e)&&(null===t||void 0===t?void 0:t.condition)){var n,r={kind:se,expression:{language:me,expression:t.condition.cql}};c.condition=c.condition||[],null===(n=c.condition)||void 0===n||n.push(r)}})),a.action.forEach((function(e){var t,a=function(e){var t=Object(Y.a)(),n="Procedure"===e.resource.resourceType?"ServiceRequest":e.resource.resourceType;return{id:t,resourceType:"ActivityDefinition",meta:{profile:["http://hl7.org/fhir/uv/cpg/StructureDefinition/cpg-publishableactivity"]},extension:[{url:"http://hl7.org/fhir/uv/cpg/StructureDefinition/cpg-knowledgeCapability",valueCode:"publishable"}],url:"urn:uuid:".concat(t),version:"1.0",name:"AD".concat(t.substring(0,7)),title:"ActivityDefinition: ".concat(t),status:le,experimental:!0,date:(new Date).toISOString(),publisher:"Logged in user",description:e.description,kind:n,productCodeableConcept:"MedicationRequest"===e.resource.resourceType?e.resource.medicationCodeableConcept:e.resource.code}}(e),r=pe(null!==(t=e.id)&&void 0!==t?t:Object(Y.a)(),e.description,a.id);i.action.push(r),n.entry.push(fe(a))})),r.action.push(c),n.entry.push(fe(i))}})),n.entry.push(fe(a)),n.entry.push(fe(r)),n}function he(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=ge(e,t),a=new Blob([n],{type:"application/json"}),r=window.URL.createObjectURL(a),o=document.createElement("a");o.href=r,o.download="".concat(e.name,".json"),o.click(),window.URL.revokeObjectURL(r)}function ge(e,t){if(t)return JSON.stringify(ve(e),void 0,2);var n={library:{identifier:{id:e.id,version:"1.0.0"},schemaIdentifier:{id:"urn:hl7-org:elm",version:"r1"},usings:{def:[{localIdentifier:"System",uri:"urn:hl7-org:elm-types:r1"},{localId:"1",locator:"3:1-3:26",localIdentifier:"FHIR",uri:"http://hl7.org/fhir",version:"4.0.0"}]},statements:{def:[{locator:"13:1-13:15",name:"Patient",context:"Patient",expression:{type:"SingletonFrom",operand:{locator:"13:1-13:15",dataType:"{http://hl7.org/fhir}Patient",type:"Retrieve"}}}]},includes:{def:[]},valueSets:{def:[]},codes:{def:[]},codeSystems:{def:[]}}},a=Object(y.a)({},e,{preconditions:e.preconditions.map((function(e){return Object(y.a)({},e,{id:void 0})})),nodes:Object(y.a)({},e.nodes)});return Object.keys(a.nodes).forEach((function(t){var r=e.nodes[t];if("elm"in r&&r.elm&&r.key){ye(n,r.elm);var o=Object(c.a)(Ee(r.elm),(function(e){e.name=r.key}));n.library.statements.def.push(o)}a.nodes[t]=Object(y.a)({},a.nodes[t],{key:void 0,elm:void 0,transitions:r.transitions.map((function(e){var t;if(null===(t=e.condition)||void 0===t?void 0:t.elm){ye(n,e.condition.elm);var a=Object(c.a)(Ee(e.condition.elm),(function(t){var n,a;t.name=null!==(n=null===(a=e.condition)||void 0===a?void 0:a.description)&&void 0!==n?n:"Unknown"}));n.library.statements.def.push(a)}return Object(y.a)({},e,{id:void 0,condition:e.condition?Object(y.a)({},e.condition,{elm:void 0,criteriaSource:void 0}):void 0})})),action:null==r.action?void 0:r.action.map((function(e){return Object(y.a)({},e,{id:void 0})}))})})),JSON.stringify(function(e,t){return Object(c.a)(e,(function(e){e.elm||(e.elm={}),e.elm.navigational=t}))}(a,n),void 0,2)}function ye(e,t){var n,a,r,o,i;null===(n=t.library.usings)||void 0===n||n.def.forEach((function(t){var n,a;(null===(n=e.library.usings)||void 0===n?void 0:n.def.find((function(e){return e.uri===t.uri})))||null===(a=e.library.usings)||void 0===a||a.def.push(t)})),null===(a=t.library.includes)||void 0===a||a.def.forEach((function(t){var n,a;(null===(n=e.library.includes)||void 0===n?void 0:n.def.find((function(e){return e.path===t.path})))||null===(a=e.library.includes)||void 0===a||a.def.push(t)})),null===(r=t.library.valueSets)||void 0===r||r.def.forEach((function(t){var n,a;(null===(n=e.library.valueSets)||void 0===n?void 0:n.def.find((function(e){return e.id===t.id})))||null===(a=e.library.valueSets)||void 0===a||a.def.push(t)})),null===(o=t.library.codes)||void 0===o||o.def.forEach((function(t){var n,a;(null===(n=e.library.codes)||void 0===n?void 0:n.def.find((function(e){return e.name===t.name})))||null===(a=e.library.codes)||void 0===a||a.def.push(t)})),null===(i=t.library.codeSystems)||void 0===i||i.def.forEach((function(t){var n,a;(null===(n=e.library.codeSystems)||void 0===n?void 0:n.def.find((function(e){return e.name===t.name})))||null===(a=e.library.codeSystems)||void 0===a||a.def.push(t)}))}function Ee(e){var t=["Patient","MeetsInclusionCriteria","InPopulation","Recommendation","Rationale","Errors"];return e.library.statements.def.find((function(e){return!t.includes(e.name)}))}function Ce(e){return e||(e=V.a.generate()),{key:e,label:"New Node",transitions:[],nodeTypeIsUndefined:!0}}function Oe(e,t){return Object(c.a)(e,(function(e){e.nodes[t.key]=t}))}function je(e,t,n){switch(n){case"MedicationRequest":return ke(Se(e,t),t,[{type:"create",description:"",id:V.a.generate(),resource:{resourceType:n,medicationCodeableConcept:{coding:[{system:"",code:"",display:""}]}}}]);case"ServiceRequest":return ke(Se(e,t),t,[{type:"create",description:"",id:V.a.generate(),resource:{resourceType:n,code:{coding:[{system:"",code:"",display:""}]}}}]);case"CarePlan":return ke(Se(e,t),t,[{type:"create",description:"",id:V.a.generate(),resource:{resourceType:n,title:""}}]);case"Observation":return function(e,t){return Object(c.a)(e,(function(e){var n=e.nodes[t];void 0===n.cql&&void 0===n.elm&&void 0===n.action&&void 0===n.nodeTypeIsUndefined||(delete n.cql,delete n.elm,delete n.action,delete n.nodeTypeIsUndefined)}))}(e,t);default:return console.error("Unknown nodeType: "+n),e}}function ke(e,t,n){return Object(c.a)(e,(function(e){e.nodes[t].action=n}))}function xe(e,t,n){return Object(c.a)(e,(function(e){var a={id:V.a.generate(),transition:n};e.nodes[t].transitions.push(a)}))}function we(e,t,n,a,r){return Object(c.a)(e,(function(e){var o,i,c=null===(o=e.nodes[t])||void 0===o||null===(i=o.transitions)||void 0===i?void 0:i.find((function(e){return e.id===n}));c&&(c.condition={description:a,cql:r.statement,elm:r.elm,criteriaSource:r.id})}))}function Ne(e,t){if(!t)return"null";var n=e.nodes[t];return!n||n.nodeTypeIsUndefined?"null":n.action||"Start"===t?"action":"branch"}function Se(e,t){return Object(c.a)(e,(function(e){var n=e.nodes[t];void 0===n.cql&&void 0===n.action&&(n.cql="",n.action=[],n.nodeTypeIsUndefined=void 0),n.transitions.forEach((function(e){delete e.condition}))}))}var Te=Object(a.memo)((function(e){var t=e.anchorEl,n=e.closeMenu,a=K().pathway;return r.a.createElement(p.a,{id:"pathway-options-menu",anchorEl:t,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"left"},keepMounted:!0,open:Boolean(t),onClose:n},r.a.createElement(b.a,{onClick:function(){a?he(a):alert("No pathway to download!"),n()}},"Export Pathway"),r.a.createElement(b.a,{onClick:function(){a?he(a,!0):alert("No pathway to download!"),n()}},"Export to CPG"))})),Re=function(){var e=h().resetCurrentCriteria,t=Object(a.useState)(null),n=Object(d.a)(t,2),o=n[0],i=n[1],c=K().pathway,l=W(),p=Object(u.g)(),b=Object(a.useCallback)((function(e){i(e.currentTarget)}),[]),f=Object(a.useCallback)((function(){i(null)}),[]),v=Object(a.useCallback)((function(){e(),p.push("/")}),[p,e]);return r.a.createElement("nav",{className:l.root},r.a.createElement("div",null,r.a.createElement(F.a,{className:l.backButton,onClick:v,"aria-label":"go back"},r.a.createElement(s.a,{icon:m.d,className:l.navigationIcons})),r.a.createElement("span",{className:l.pathwayName},null===c||void 0===c?void 0:c.name)),r.a.createElement(F.a,{onClick:b,"aria-controls":"pathway-options-menu","aria-haspopup":"true"},r.a.createElement(s.a,{icon:m.h,className:l.navigationIcons})),r.a.createElement(Te,{anchorEl:o,closeMenu:f}))},Pe=n(119),Ie=n(143);var Be=function(e){var t=Object(a.useState)({status:"loading"}),n=Object(d.a)(t,2),r=n[0],o=n[1];return Object(a.useEffect)((function(){(function(e){return fetch(e,{headers:{Accept:"application/json"}})})(e).then((function(e){return e.json()})).then((function(t){return t.map((function(t){return function(e,t){return fetch(e,t).then((function(e){return e.json()}))}(e+"/"+t)}))})).then((function(e){return Promise.all(e)})).then((function(e){return o({status:"loaded",payload:e})})).catch((function(e){return o({status:"error",error:e})}))}),[e]),r},Me=Object(a.createContext)({}),Le=Object(a.memo)((function(e){var t=e.children,n=H([]),o=Object(d.a)(n,3),i=o[0],c=o[1],l=o[2],u=Be(Ie.a.get("demoPathwaysService")),s=u.payload,m=Object(a.useCallback)((function(e){l((function(t){return[].concat(Object(Pe.a)(t),[e])}))}),[l]),p=Object(a.useCallback)((function(e){l((function(t){return t.filter((function(t){return t.id!==e}))}))}),[l]),b=Object(a.useCallback)((function(e){var t=c.current.findIndex((function(t){return t.id===e.id}));l((function(n){return[].concat(Object(Pe.a)(n.slice(0,t)),[e],Object(Pe.a)(n.slice(t+1)))}))}),[c,l]);switch(Object(a.useEffect)((function(){s&&l(s)}),[s,l]),u.status){case"error":return r.a.createElement("div",null,"Error loading pathways");default:return r.a.createElement(Me.Provider,{value:{pathways:i,addPathway:m,deletePathway:p,updatePathway:b,status:u.status}},t)}})),De=function(){return Object(a.useContext)(Me)},_e=Object(q.a)((function(e){return{root:{display:"flex",flexDirection:"column",padding:e.variables.spacing.globalPadding,color:e.palette.text.primary,backgroundColor:e.palette.common.gray,width:"33%",minWidth:"550px",overflowY:"scroll",float:"left"},formControl:{margin:e.spacing(1,0),minWidth:375},divider:{width:"100%"},headerLabelStart:{cursor:"default"},displayText:{margin:"0 0 5px 0",fontWeight:900,fontSize:"1em"},sidebarHeader:{display:"flex",justifyContent:"space-between"},sidebarHeaderGroup:{display:"flex",alignItems:"center"},sidebarHeaderButton:{height:"45px",width:"45px",color:e.palette.text.primary},headerLabelGroup:{display:"flex",cursor:"pointer",height:"60px"},headerLabel:{display:"flex",alignItems:"center",fontSize:"1.6em",fontWeight:700,margin:"0 5px"},headerLabelText:{marginBottom:"5px"},editIcon:{fontSize:"0.6em",marginLeft:"10px"},sidebarButtonGroup:{display:"flex",margin:"10px 0"},sidebarButtonGroupExtraMargin:{display:"flex",margin:"20px 0 10px 0"},sidebarButton:{minWidth:180,marginRight:"20px"},sidebarButtonText:{fontStyle:"italic"},outlinedDiv:{display:"flex",flexDirection:"column",alignItems:"flex-start","& div":{width:"100%"}},outlinedDivError:{borderColor:"".concat(e.palette.error.main," !important"),"&:hover":{borderColor:"".concat(e.palette.error.main," !important")}},toggleSidebar:{display:"inline-flex",alignItems:"center",justifyContent:"center",float:"left",width:"50px",minWidth:"50px",height:"50px",fontSize:"2em",backgroundColor:e.palette.primary.main,color:e.palette.text.primary,"&:hover":{cursor:"pointer"}},cancelButton:{alignSelf:"flex-end",marginTop:"5px",padding:"5px 15px",fontSize:"1em"},buildCriteriaContainer:{display:"flex",justifyContent:"space-between"},buildCriteriaText:{marginTop:"0.5em",marginBottom:"1em"},saveButton:{marginLeft:"1em",backgroundColor:e.palette.error.main,borderColor:e.palette.error.main,"&:hover":{backgroundColor:e.palette.error.main}},transitionContainer:{backgroundColor:e.palette.common.grayVeryDark,padding:"5px 15px",margin:"15px 0"},dividerHeader:{width:"100%",textTransform:"uppercase",borderBottom:"1px solid "+e.palette.common.blueLighter,color:e.palette.common.blueLighter,lineHeight:"0.1em",margin:"10px 0 20px",fontWeight:800,paddingLeft:"15px","& span":{background:e.palette.common.gray,padding:"0 10px"}},dialogCloseButton:{float:"right",width:"45px"},dialogContent:{color:e.palette.common.black,fontSize:"16px",display:"flex",marginTop:"-25px"},dialogContentText:{paddingLeft:"10px",lineHeight:"40px"},alertIcon:{color:e.palette.common.red,fontSize:"40px"},connectDropdown:{margin:"auto",display:"flex",flexDirection:"column",flexWrap:"nowrap",alignContent:"center"},connectText:{display:"flex",flexDirection:"row",alignItems:"center",fontSize:"0.95em",fontStyle:"italic"},cancelButtonDropdown:{marginLeft:"auto",border:"none",alignSelf:"center",color:e.palette.common.blueLighter,fontSize:"1em",fontStyle:"italic",textTransform:"none"}}}),{name:"Sidebar",index:1}),Ae=Object(a.createContext)({}),ze=Object(a.memo)((function(e){var t=e.children,n=H(null),o=Object(d.a)(n,3),i=o[0],c=o[1],l=o[2],u=Object(a.useCallback)((function(e){l(e)}),[l]);return r.a.createElement(Ae.Provider,{value:{currentNode:i,currentNodeRef:c,setCurrentNode:u}},t)})),Fe=function(){return Object(a.useContext)(Ae)},qe=n(1522),We=n(1546),He=n(1540),Ue=Object(a.memo)((function(e){var t=e.id,n=e.label,o=e.options,i=e.value,c=e.onChange,l=Object(a.useCallback)((function(e){c&&c(e)}),[c]);return r.a.createElement(qe.a,{variant:"outlined",fullWidth:!0},r.a.createElement(We.a,{id:t,htmlFor:"".concat(t,"-select")},n),r.a.createElement(He.a,{id:"".concat(t,"-select"),value:i||"",onChange:l,label:n,error:null==i||""===i,MenuProps:{getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},displayEmpty:!0},o.map((function(e){return r.a.createElement(b.a,{key:e.value,value:e.value},e.label)}))))})),Ge=n(1548),Ke=n(1526),Je=Object(a.createContext)({}),Ve=Object(a.memo)((function(e){var t=e.children,n=Object(a.useState)(!1),o=Object(d.a)(n,2),i=o[0],c=o[1],l=Object(a.useState)("Deleted Successfully"),u=Object(d.a)(l,2),s=u[0],m=u[1],p=Object(a.useCallback)((function(){c(!1)}),[c]);return r.a.createElement(Je.Provider,{value:{snackbarText:s,openSnackbar:i,handleCloseSnackbar:p,setSnackbarText:m,setOpenSnackbar:c}},t)})),Ye=function(){return Object(a.useContext)(Je)},$e=Object(a.memo)((function(){var e=Ye(),t=e.snackbarText,n=e.openSnackbar,a=e.handleCloseSnackbar;return r.a.createElement(Ge.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},open:n,autoHideDuration:1e4,onClose:a,message:t,action:r.a.createElement(r.a.Fragment,null,r.a.createElement(Ke.a,{color:"secondary",size:"small",onClick:a},"UNDO"),r.a.createElement(F.a,{size:"small","aria-label":"close",color:"inherit",onClick:a},r.a.createElement(s.a,{icon:m.w})))})})),Xe=Object(a.memo)((function(){var e=K(),t=e.pathway,n=e.pathwayRef,o=Fe(),i=o.currentNode,c=o.currentNodeRef,l=De().updatePathway,u=_e(),s=Object(a.useState)(!1),p=Object(d.a)(s,2),b=p[0],f=p[1],v=i&&t?function(e,t){var n,a=[],r=function e(t,n,a){var r=[],o=[],i=t.nodes[a];return i.transitions.forEach((function(a){var c;a.transition===n?r.push(i):(null===(c=o=e(t,n,a.transition))||void 0===c?void 0:c.length)&&(r.some((function(e){return e.key===i.key}))||r.push(i),r=r.concat(o))})),r}(e,null!==(n=t.key)&&void 0!==n?n:"","Start");return r.push(t),Object.keys(e.nodes).forEach((function(n){var o=e.nodes[n],i=t.transitions.some((function(e){return e.transition===n})),c=r.some((function(e){return e.key===n}));i||c||!o.key||a.push({label:o.label,value:o.key})})),a}(t,i):[],h=v.length>0,g=Object(a.useCallback)((function(e){var t,a=null===e||void 0===e?void 0:e.target.value;n.current&&(null===(t=c.current)||void 0===t?void 0:t.key)&&l(xe(n.current,c.current.key,a)),f(!1)}),[l,c,n]),y=Object(a.useCallback)((function(){f(!b)}),[b]);return r.a.createElement("div",null,!b&&r.a.createElement(at,{buttonName:"Connect Node",buttonIcon:m.m,buttonText:"Create a transition to an existing node in the pathway.",onClick:y,disabled:!h,hasTooltip:!h,tooltipTitle:"There are no possible nodes to connect to."}),b&&h&&r.a.createElement("div",{className:u.connectDropdown},r.a.createElement(Ue,{id:"transitions",label:"Node To Connect To",options:v,onChange:g}),r.a.createElement("div",{className:u.connectText},"Select node from list to add transition.",r.a.createElement(Ke.a,{className:u.cancelButtonDropdown,size:"small",variant:"text",onClick:y},"Cancel"))))})),Qe=Object(a.memo)((function(e){var t=e.headerElement,n=De().updatePathway,o=K(),i=o.pathway,c=o.pathwayRef,l=Fe(),p=l.currentNode,b=l.currentNodeRef,f=Object(a.useState)(!0),v=Object(d.a)(f,2),h=v[0],g=v[1],y=_e(),E=Object(u.g)(),C=Object(a.useRef)(null),O=Object(a.useCallback)((function(){g(!h)}),[h]),j=Object(a.useCallback)((function(e){var t;(null===(t=b.current)||void 0===t?void 0:t.key)&&c.current&&n(je(c.current,b.current.key,e))}),[c,n,b]),k=Object(a.useCallback)((function(e){j((null===e||void 0===e?void 0:e.target.value)||"")}),[j]),x=Object(a.useCallback)((function(){var e;if((null===(e=b.current)||void 0===e?void 0:e.key)&&c.current){var t=Ce(),a=Oe(c.current,t);a=xe(a,b.current.key,t.key),n(a),!Q(b.current)&&t.key&&re(c.current.id,t.key,E)}}),[c,n,b,E]);if(Object(a.useEffect)((function(){var e=function(){(null===C||void 0===C?void 0:C.current)&&(null===t||void 0===t?void 0:t.current)&&(C.current.style.height=window.innerHeight-t.current.clientHeight+"px")};return e(),window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[h,t]),!i)return r.a.createElement("div",null,"Error: No pathway");if(!p)return r.a.createElement("div",null,"Error: No current node");if("Start"===p.key)return r.a.createElement(r.a.Fragment,null,h&&r.a.createElement("div",{className:y.root,ref:C},r.a.createElement(nt,{node:p,isTransition:!1}),r.a.createElement("h5",{className:y.dividerHeader},r.a.createElement(r.a.Fragment,null)," "),r.a.createElement(at,{buttonName:"Add Node",buttonIcon:m.p,buttonText:"Add a new transition to a new node in the pathway.",onClick:x})),r.a.createElement($e,null));var w=Ne(i,p.key),N=void 0!==p.key&&("Start"!==p.key||0===p.transitions.length);return r.a.createElement(r.a.Fragment,null,h&&r.a.createElement("div",{className:y.root,ref:C},r.a.createElement(nt,{node:p,isTransition:!1}),r.a.createElement("h5",{className:y.dividerHeader},r.a.createElement("span",null,"Details")),"null"===w&&r.a.createElement(Ue,{id:"nodeType",label:"Node Type",options:ee,onChange:k,value:""}),"action"===w&&r.a.createElement(lt,{changeNodeType:j}),"branch"===w&&r.a.createElement(Ue,{id:"nodeType",label:"Node Type",options:ee,onChange:k,value:"Observation"}),r.a.createElement("h5",{className:y.dividerHeader},r.a.createElement("span",null,"Transitions")),null===p||void 0===p?void 0:p.transitions.map((function(e){return r.a.createElement(Bt,{key:e.id,transition:e},"branch"===w&&r.a.createElement(kt,{key:e.id,transition:e}))})),N&&r.a.createElement(r.a.Fragment,null,r.a.createElement(at,{buttonName:"Add New Node",buttonIcon:m.p,buttonText:"Add a new transition to a new node in the pathway.",onClick:x}),r.a.createElement(Xe,null))),r.a.createElement("div",{className:y.toggleSidebar,onClick:O},r.a.createElement(s.a,{icon:h?m.d:m.e})),r.a.createElement($e,null))})),Ze=n(18),et=n(1523),tt=n(1543),nt=Object(a.memo)((function(e){var t=e.node,n=e.isTransition,o=void 0!==n&&n,i=De().updatePathway,l=Object(a.useState)(!1),p=Object(d.a)(l,2),b=p[0],f=p[1],v=Object(a.useState)(!1),h=Object(d.a)(v,2),g=h[0],y=h[1],E=Object(a.useState)(!1),C=Object(d.a)(E,2),O=C[0],j=C[1],k=Fe().currentNodeRef,x=Ye(),w=x.setSnackbarText,N=x.setOpenSnackbar,S=K(),T=S.pathway,R=S.pathwayRef,P=Object(a.useRef)(null),I=(null===t||void 0===t?void 0:t.label)||"",B=_e(),M=Object(u.g)(),L=Object(a.useCallback)((function(){if(R.current&&t.key){var e=te(R.current,t.key);re(R.current.id,e[0],M)}}),[M,R,t.key]),D=Object(a.useCallback)((function(){R.current&&t.key&&re(R.current.id,t.key,M)}),[M,R,t.key]),_=Object(a.useCallback)((function(){var e,n,a=null!==(e=null===(n=P.current)||void 0===n?void 0:n.value)&&void 0!==e?e:"";t.key&&R.current&&i(function(e,t,n){return Object(c.a)(e,(function(e){e.nodes[t].label=n}))}(R.current,t.key,a)),f(!1)}),[R,i,t.key]),A=Object(a.useCallback)((function(){f(!0)}),[]),z=Object(a.useCallback)((function(){if(t.key&&R.current&&ae(R.current,t.transitions)){var e=te(R.current,t.key);i(function(e,t){return Object(c.a)(e,(function(e){delete e.nodes[t],Object.keys(e.nodes).forEach((function(n){e.nodes[n].transitions.forEach((function(a){a.transition===t&&(e.nodes[n].transitions=e.nodes[n].transitions.filter((function(e){return a.id!==e.id})))}))}))}))}(R.current,t.key)),re(R.current.id,e[0],M),j(!1),w("".concat(t.label," node deleted successfully")),N(!0)}}),[R,i,w,N,t.key,t.label,t.transitions,M]),q=Object(a.useCallback)((function(){var e;t.key&&(null===(e=k.current)||void 0===e?void 0:e.key)&&R.current&&!ne(R.current,t.key)&&(i(function(e,t,n){return Object(c.a)(e,(function(e){var a=e.nodes[t].transitions.filter((function(e){return e.transition!==n}));e.nodes[t].transitions=a}))}(R.current,k.current.key,t.key)),j(!1),w("Transition from ".concat(k.current.label," to ").concat(t.label," deleted successfully")),N(!0))}),[R,k,i,w,N,t]),W=Object(a.useCallback)((function(){j(!0)}),[]),H=Object(a.useCallback)((function(){j(!1)}),[]),U=Object(a.useCallback)((function(){y(!0)}),[]),G=Object(a.useCallback)((function(){y(!1)}),[]),J=Object(a.useCallback)((function(e){"Enter"===e.key&&_()}),[_]),V=!T||!ae(T,t.transitions),Y=!T||!t.key||ne(T,t.key),$=o?Y:V,X=o?"Deleting this transition would result in an orphaned node. To delete, first add the child node as a transition to another node, or delete it directly.":"Deleting this node would result in an orphaned descendent node. To delete, first add another transition to the would-be orphaned node from another node, or delete it directly.";return r.a.createElement("div",{className:B.sidebarHeader},r.a.createElement("div",{className:B.sidebarHeaderGroup},"Start"!==t.key&&!o&&r.a.createElement(F.a,{className:B.sidebarHeaderButton,onClick:L,"aria-label":"go to parent node"},r.a.createElement(s.a,{icon:m.d})),r.a.createElement("div",{className:B.headerLabelGroup,onClick:A},b&&"Start"!==t.key?r.a.createElement(qe.a,{className:B.formControl,fullWidth:!0},r.a.createElement(et.a,{className:B.headerLabel,type:"text",inputRef:P,onBlur:_,onKeyPress:J,defaultValue:I,autoFocus:!0,onFocus:function(e){return e.target.select()}})):r.a.createElement("div",{className:Object(Ze.a)(B.headerLabel,B.headerLabelText,"Start"===t.key&&B.headerLabelStart)},I,"Start"!==t.key&&r.a.createElement(s.a,{className:B.editIcon,icon:m.g})))),r.a.createElement("div",{className:B.sidebarHeaderGroup},"Start"!==t.key&&r.a.createElement(tt.a,{placement:"top",open:!!$&&g,onClose:G,onOpen:U,title:X,arrow:!0},r.a.createElement("span",null,r.a.createElement(F.a,{className:B.sidebarHeaderButton,onClick:W,"aria-label":o?"delete transition":"delete node",disabled:$},r.a.createElement(s.a,{icon:m.z})))),o&&r.a.createElement(F.a,{className:B.sidebarHeaderButton,onClick:D,"aria-label":"go to transition node"},r.a.createElement(s.a,{icon:m.e}))),r.a.createElement(Pt,{nodeLabel:t.label,isTransition:o,open:O,onDelete:o?q:z,onClose:H}))})),at=Object(a.memo)((function(e){var t=e.buttonName,n=e.buttonIcon,a=e.buttonText,o=e.extraMargin,i=void 0!==o&&o,c=e.onClick,l=e.hasTooltip,u=void 0!==l&&l,d=e.tooltipTitle,m=void 0===d?"":d,p=e.disabled,b=void 0!==p&&p,f=_e(),v=function(e){var t=e.children;return u?r.a.createElement(tt.a,{title:m,placement:"top"},r.a.createElement("span",null,t)):r.a.createElement(r.a.Fragment,null,t)};return r.a.createElement("div",{className:i?f.sidebarButtonGroupExtraMargin:f.sidebarButtonGroup},r.a.createElement(v,null,r.a.createElement(Ke.a,{className:f.sidebarButton,variant:"contained",color:"primary",startIcon:r.a.createElement(s.a,{icon:n}),onClick:c,disabled:b},t)),r.a.createElement("div",{className:f.sidebarButtonText},a))})),rt=n(1549),ot=Ie.a.get("cqlToElmWebserviceUrl");function it(e){return fetch(ot,{method:"POST",headers:{"Content-Type":"application/cql",Accept:"application/elm+json"},body:e}).then((function(e){return e.json()}))}var ct=[{label:"ICD-9-CM",value:"http://hl7.org/fhir/sid/icd-9-cm"},{label:"ICD-10-CM",value:"http://hl7.org/fhir/sid/icd-10-cm"},{label:"LOINC",value:"http://loinc.org"},{label:"NCI",value:"http://ncimeta.nci.nih.gov"},{label:"RXNORM",value:"http://www.nlm.nih.gov/research/umls/rxnorm"},{label:"SNOMED",value:"http://snomed.info/sct"}],lt=Object(a.memo)((function(e){var t=e.changeNodeType,n=De().updatePathway,o=K().pathwayRef,i=Fe(),l=i.currentNode,u=i.currentNodeRef,d=_e(),p=Object(a.useCallback)((function(e){t((null===e||void 0===e?void 0:e.target.value)||"")}),[t]),b=Object(a.useCallback)((function(e,t){o.current&&it(function(e,t){var n=e.resource,a="cql".concat(V.a.generate().replace(/-/g,"a")),r="library ".concat(a," version '1'\nusing FHIR version '4.0.0'\n"),o=function(e){return'codesystem "'.concat(e,"\": '").concat(e,"'\n")},i=function(e){return"return Tuple{ resourceType: '".concat(e,"', id: R.id.value, status: R.status.value}")},c=function(e){return"[".concat(e,': "').concat(a,' code"]')},l=function(){return'define "'.concat(t,'":')};if("MedicationRequest"===n.resourceType){var u=n.medicationCodeableConcept.coding[0];r+=o(u.system),r+='code "'.concat(a," code\": '").concat(escape(u.code),"' from \"").concat(u.system,"\" display '").concat(u.display,"'\n"),r+="".concat(l(),"\n      ").concat(c("MedicationRequest")," R ").concat(i("MedicationRequest"))}else if("ServiceRequest"===n.resourceType){var d=n.code.coding[0];r+=o(d.system),r+='code "'.concat(a," code\": '").concat(escape(d.code),"' from \"").concat(d.system,"\" display '").concat(d.display,"'\n"),r+="".concat(l(),"\n      if exists ").concat(c("Procedure")," \n      then ").concat(c("Procedure")," R ").concat(i("Procedure")," \n      else ").concat(c("ServiceRequest")," R ").concat(i("ServiceRequest"))}else"CarePlan"===n.resourceType?r+="".concat(l(),"\n      [CarePlan] R where R.title.value = '").concat(escape(n.title),"' ").concat(i("CarePlan")):console.error("Auto generating CQL for action - unsupported resource type: "+n.resourceType);return r}(e,t)).then((function(e){n(function(e,t,n){return Object(c.a)(e,(function(e){e.nodes[t].elm=n,e.nodes[t].cql=Ee(n).name}))}(o.current,t,e))}))}),[o,n]),f=Object(a.useCallback)((function(e){var t;if((null===(t=u.current)||void 0===t?void 0:t.key)&&o.current){var a=(null===e||void 0===e?void 0:e.target.value)||"",r=Object(c.a)(u.current.action[0],(function(e){e.resource.medicationCodeableConcept?e.resource.medicationCodeableConcept.coding[0].code=a:e.resource.code.coding[0].code=a}));n(ke(o.current,u.current.key,[E(r)]))}}),[u,o,n]),v=Object(a.useCallback)((function(e){var t;if((null===(t=u.current)||void 0===t?void 0:t.key)&&o.current){var a=(null===e||void 0===e?void 0:e.target.value)||"",r=Object(c.a)(u.current.action[0],(function(e){e.description=a}));n(ke(o.current,u.current.key,[r]))}}),[u,o,n]),h=Object(a.useCallback)((function(e){var t;if((null===(t=u.current)||void 0===t?void 0:t.key)&&o.current){var a=(null===e||void 0===e?void 0:e.target.value)||"",r=Object(c.a)(u.current.action[0],(function(e){e.resource.title=a}));n(ke(o.current,u.current.key,[E(r)])),b(r,u.current.key)}}),[u,o,n,b]),g=Object(a.useCallback)((function(e){var t;if((null===(t=u.current)||void 0===t?void 0:t.key)&&o.current){var a=(null===e||void 0===e?void 0:e.target.value)||"",r=Object(c.a)(u.current.action[0],(function(e){e.resource.medicationCodeableConcept?e.resource.medicationCodeableConcept.coding[0].system=a:e.resource.code.coding[0].system=a}));n(ke(o.current,u.current.key,[E(r)]))}}),[u,o,n]),y=Object(a.useCallback)((function(){var e;if((null===(e=u.current)||void 0===e?void 0:e.key)&&u.current.action.length&&o.current){var t=function(e,t){return Object(c.a)(e,(function(e){e.resource.medicationCodeableConcept?e.resource.medicationCodeableConcept.coding[0].display=t:e.resource.title?e.resource.description=t:e.resource.code.coding[0].display=t}))}(u.current.action[0],"Example Text");n(ke(o.current,u.current.key,[t])),b(t,u.current.key)}else console.error("No Actions -- Cannot Validate")}),[u,o,n,b]),E=function(e){return Object(c.a)(e,(function(e){e.resource.medicationCodeableConcept?e.resource.medicationCodeableConcept.coding[0].display="":"CarePlan"===e.resource.resourceType?e.resource.description="":e.resource.code.coding[0].display=""}))},C=function(e){"Enter"===e.key&&y()},O=void 0!==(null===l||void 0===l?void 0:l.key)&&"Start"!==l.key,j=l.action,k=(null===j||void 0===j?void 0:j.length)>0&&j[0].resource,x="",w="",N="";return"MedicationRequest"===k.resourceType||"ServiceRequest"===k.resourceType?(x=k.code?k.code.coding[0].system:k.medicationCodeableConcept.coding[0].system,w=k.code?k.code.coding[0].code:k.medicationCodeableConcept.coding[0].code,N=k.code?k.code.coding[0].display:k.medicationCodeableConcept.coding[0].display):N=k.description,r.a.createElement(r.a.Fragment,null,O&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Ue,{id:"nodeType",label:"Node Type",options:ee,onChange:p,value:k.resourceType}),("MedicationRequest"===k.resourceType||"ServiceRequest"===k.resourceType)&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Ue,{id:"codeSystem",label:"Code System",options:ct,onChange:g,value:x}),x&&r.a.createElement(rt.a,{id:"code-input",label:"Code",value:w,onChange:f,variant:"outlined",error:""===w,inputProps:{onKeyPress:C}}),w&&r.a.createElement(r.a.Fragment,null,N?r.a.createElement("div",{className:d.displayText},r.a.createElement(s.a,{icon:m.c})," ",N):r.a.createElement(at,{buttonName:"Validate",buttonIcon:m.c,buttonText:N||"Check validation of the input system and code",onClick:y}),r.a.createElement(rt.a,{id:"description-input",label:"Description",value:j[0].description||"",onChange:v,variant:"outlined",error:""===j[0].description}))),"CarePlan"===k.resourceType&&r.a.createElement(r.a.Fragment,null,r.a.createElement(rt.a,{id:"title-input",label:"Title",value:k.title||"",onChange:h,variant:"outlined",error:null==k.title,inputProps:{onKeyPress:C}}),k.title&&r.a.createElement(rt.a,{id:"description-input",label:"Description",value:j[0].description||"",onChange:v,variant:"outlined",error:""===j[0].description}))))})),ut=n(331),dt=n.n(ut),st=n(1057),mt=n(1527),pt=n(1539),bt=n(1541),ft=Object(a.createContext)({}),vt=["Patient","MeetsInclusionCriteria","InPopulation","Recommendation","Rationale","Errors"];function ht(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.library.statements.def,a=n.filter((function(e){return!vt.includes(e.name)}));if(!a)return alert("No elm statement found in that file"),[];var r=t?"Criteria Builder (".concat(e.library.identifier.id.substring(0,5),")"):e.library.identifier.id;return a.map((function(t){return{id:V.a.generate(),label:"".concat(r,": ").concat(t.name),version:e.library.identifier.version,modified:Date.now(),elm:e,statement:t.name}}))}function gt(e){var t,n=JSON.parse(e);if(null===(t=n.library)||void 0===t?void 0:t.identifier)return ht(n);alert("Please upload ELM file")}var yt=Object(a.memo)((function(e){var t=e.children,n=Object(a.useState)([]),o=Object(d.a)(n,2),i=o[0],c=o[1],l=Be(Ie.a.get("demoCriteria")).payload;Object(a.useEffect)((function(){if(l){var e=[];l.forEach((function(t){var n=gt(JSON.stringify(t));n&&e.push.apply(e,Object(Pe.a)(n))})),c(e)}}),[l]);var u=Object(a.useCallback)((function(e){var t=new FileReader;t.onload=function(e){var t;if(null===(t=e.target)||void 0===t?void 0:t.result){var n=gt(e.target.result);n&&c((function(e){return[].concat(Object(Pe.a)(e),Object(Pe.a)(n))}))}else alert("Unable to read that file")},t.readAsText(e)}),[]),s=Object(a.useCallback)((function(e){c((function(t){return t.filter((function(t){return t.id!==e}))}))}),[]),m=Object(a.useCallback)((function(e){var t=ht(e,!0);return c((function(e){return[].concat(Object(Pe.a)(e),Object(Pe.a)(t))})),t}),[]);return r.a.createElement(ft.Provider,{value:{criteria:i,addCriteria:u,deleteCriteria:s,addElmCriteria:m}},t)})),Et=function(){return Object(a.useContext)(ft)},Ct=Object(a.createContext)({}),Ot=Object(a.memo)((function(e){var t=e.children,n=Object(a.useState)(""),o=Object(d.a)(n,2),i=o[0],c=o[1],l=Object(a.useState)(""),u=Object(d.a)(l,2),s=u[0],m=u[1],p=Object(a.useState)(""),b=Object(d.a)(p,2),f=b[0],v=b[1],h=Object(a.useState)(0),g=Object(d.a)(h,2),y=g[0],E=g[1],C=Object(a.useState)(0),O=Object(d.a)(C,2),j=O[0],k=O[1],x=Object(a.useCallback)((function(){c(""),m(""),v(""),E(0),k(0)}),[c,m,v,E,k]);return r.a.createElement(Ct.Provider,{value:{selectedElement:i,selectedDemoElement:s,gender:f,minimumAge:y,maximumAge:j,setSelectedElement:c,setSelectedDemoElement:m,setGender:v,setMinimumAge:E,setMaximumAge:k,resetCriteriaBuilder:x}},t)})),jt=function(){return Object(a.useContext)(Ct)},kt=Object(a.memo)((function(e){var t,n,o,i,l,u,p,b=e.transition,f=De().updatePathway,v=Et(),g=v.criteria,y=v.addElmCriteria,E=h(),C=E.buildCriteriaSelected,O=E.setBuildCriteriaSelected,j=E.currentCriteriaNodeId,k=E.setCurrentCriteriaNodeId,x=E.currentCriteriaCql,w=E.setCurrentCriteriaCql,N=E.criteriaName,S=E.setCriteriaName,T=E.resetCurrentCriteria,R=jt().resetCriteriaBuilder,P=K().pathwayRef,I=Fe().currentNodeRef,B=Object(a.useMemo)((function(){return g.map((function(e){return{value:e.id,label:e.label}}))}),[g]),M=B.length>0,L=_e(),D=Object(a.useState)(!1),_=Object(d.a)(D,2),A=_[0],z=_[1],F=null===(t=b.condition)||void 0===t?void 0:t.description,q=null!=F,W=F&&""!==F,H=(null===(n=b.condition)||void 0===n?void 0:n.cql)||(null===(o=b.condition)||void 0===o?void 0:o.description),U=H?"DELETE":"CANCEL",G=H?r.a.createElement(s.a,{icon:m.z}):null,J=M&&(A||(null===(i=b.condition)||void 0===i?void 0:i.cql)||(null===(l=b.condition)||void 0===l?void 0:l.description)),Y=Object(a.useRef)(b),$=Object(a.useCallback)((function(){var e,t,n,a;H&&b.id&&(null===(e=I.current)||void 0===e?void 0:e.key)&&P.current?(f((t=P.current,n=I.current.key,a=b.id,Object(c.a)(t,(function(e){var t=e.nodes[n].transitions.find((function(e){return e.id===a}));t&&delete t.condition})))),z(!1)):z(!A)}),[A,I,P,H,b.id,f]),X=Object(a.useCallback)((function(e){var t,n;if((null===(t=I.current)||void 0===t?void 0:t.key)&&Y.current.id&&P.current){var a=(null===e||void 0===e?void 0:e.target.value)||"",r=g.find((function(e){return e.id===a}));if(r){var o=we(P.current,I.current.key,Y.current.id,(null===(n=Y.current.condition)||void 0===n?void 0:n.description)||"",r);f(o)}}}),[I,f,P,Y,g]),Q=Object(a.useCallback)((function(e){var t;if((null===(t=I.current)||void 0===t?void 0:t.key)&&b.id&&P.current){var n,a,r,o,i=(null===e||void 0===e?void 0:e.target.value)||"";f((n=P.current,a=I.current.key,r=b.id,o=i,Object(c.a)(n,(function(e){var t,n,i=null===(t=e.nodes[a])||void 0===t||null===(n=t.transitions)||void 0===n?void 0:n.find((function(e){return e.id===r}));(null===i||void 0===i?void 0:i.condition)?i.condition.description=o:i&&(i.condition={description:o,cql:""})}))))}}),[I,b.id,f,P]),Z=Object(a.useCallback)((function(e){S((null===e||void 0===e?void 0:e.target.value)||"")}),[S]),ee=Object(a.useCallback)((function(){var e;k(null!==(e=b.id)&&void 0!==e?e:""),w(null),S(""),C||O(!0),R()}),[C,k,b,O,w,R,S]),te=Object(a.useCallback)((function(){T(),R()}),[T,R]),ne=Object(a.useCallback)(Object(st.a)(dt.a.mark((function e(){var t,n,a,r,o,i;return dt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((null===(t=I.current)||void 0===t?void 0:t.key)&&Y.current.id&&P.current&&(null===x||void 0===x?void 0:x.cql)){e.next=2;break}return e.abrupt("return");case 2:return n="cql".concat(V.a.generate().replace(/-/g,"a")),a="library ".concat(n," version '1'\nusing FHIR version '4.0.0'\ncontext Patient\n"),a+='define "'.concat(N,'":\n      ').concat(x.cql),e.next=7,it(a);case 7:r=e.sent,o=y(r),i=we(P.current,I.current.key,Y.current.id,N,o[0]),f(i),te();case 12:case"end":return e.stop()}}),e)}))),[I,f,P,Y,x,N,te,y]),ae=C&&j===b.id;return r.a.createElement(r.a.Fragment,null,!J&&!ae&&r.a.createElement(at,{buttonName:"Select Criteria",buttonIcon:m.v,buttonText:"Add previously built or imported criteria logic to branch node.",onClick:$,disabled:!M,hasTooltip:!M,tooltipTitle:"No criteria to select. Add criteria to use."}),J&&!ae&&r.a.createElement(wt,{label:"Criteria Selector",error:!q||!W},r.a.createElement(r.a.Fragment,null,r.a.createElement(Ue,{id:"Criteria",label:"Criteria",options:B,onChange:X,value:(null===(u=b.condition)||void 0===u?void 0:u.criteriaSource)||void 0}),r.a.createElement(rt.a,{label:"Criteria Display",value:(null===(p=b.condition)||void 0===p?void 0:p.description)||"",variant:"outlined",onChange:Q,error:!W})),r.a.createElement(Ke.a,{className:L.cancelButton,color:"inherit",size:"small",variant:"outlined",startIcon:G,onClick:$},U)),!J&&!ae&&r.a.createElement(at,{buttonName:"Build Criteria",buttonIcon:m.y,buttonText:"Create new criteria logic to add to branch node.",extraMargin:!0,onClick:ee}),ae&&r.a.createElement(wt,{label:"Criteria Builder",error:!q||!W},r.a.createElement(rt.a,{error:""===N,label:"Criteria Name",variant:"outlined",onChange:Z,value:N,fullWidth:!0}),(null===x||void 0===x?void 0:x.text)&&r.a.createElement("span",{className:L.buildCriteriaText},x.text),r.a.createElement("div",{className:L.buildCriteriaContainer},r.a.createElement(mt.a,{label:r.a.createElement(pt.a,{fontStyle:"italic"},"Add to reusable criteria"),control:r.a.createElement(bt.a,{color:"default"}),checked:!0}),r.a.createElement(Ke.a,{color:"inherit",size:"large",variant:"outlined",onClick:te},"Cancel"),r.a.createElement(Ke.a,{className:L.saveButton,color:"inherit",size:"large",variant:"outlined",startIcon:r.a.createElement(s.a,{icon:m.s}),disabled:""===N||null===x,onClick:ne},"Save"))))})),xt=function(e){var t=e.children;return r.a.createElement(r.a.Fragment,null,t)},wt=function(e){var t=e.children,n=e.label,a=e.error,o=_e();return r.a.createElement(rt.a,{variant:"outlined",label:n,multiline:!0,InputLabelProps:{shrink:!0},InputProps:{inputComponent:xt,classes:{root:Object(Ze.a)(o.outlinedDiv,a&&o.outlinedDivError),notchedOutline:Object(Ze.a)(a&&o.outlinedDivError)}},inputProps:{children:t},fullWidth:!0})},Nt=n(1544),St=n(1528),Tt=n(1529),Rt=n(1530),Pt=Object(a.memo)((function(e){var t=e.open,n=e.nodeLabel,a=e.isTransition,o=e.onClose,i=e.onDelete,c=_e(),l=Fe().currentNode,u=a?r.a.createElement("span",null,"Delete the transition from ",r.a.createElement("strong",null,null===l||void 0===l?void 0:l.label)," to"," ",r.a.createElement("strong",null,n),"? This will not delete either node, just the transition between them."):r.a.createElement("span",null,"Delete the node ",r.a.createElement("strong",null,n),"? This will also remove any transitions to this node.");return r.a.createElement(r.a.Fragment,null,r.a.createElement(Nt.a,{open:t,onClose:o,"aria-labelledby":"create-pathway",fullWidth:!0,maxWidth:"md"},r.a.createElement(St.a,{disableTypography:!0},r.a.createElement(F.a,{"aria-label":"close",onClick:o,className:c.dialogCloseButton},r.a.createElement(s.a,{icon:m.w}))),r.a.createElement(Tt.a,{className:c.dialogContent},r.a.createElement(s.a,{icon:m.i,className:c.alertIcon}),r.a.createElement("p",{className:c.dialogContentText},u)),r.a.createElement(Rt.a,null,r.a.createElement(Ke.a,{variant:"text",color:"primary",onClick:o},"Cancel"),r.a.createElement(Ke.a,{variant:"contained",color:"secondary",onClick:i},"Delete"))))})),It=n(1531),Bt=Object(a.memo)((function(e){var t=e.transition,n=e.children,a=_e(),o=K().pathway,i=(null===t||void 0===t?void 0:t.transition)||"",c=null===o||void 0===o?void 0:o.nodes[i];return r.a.createElement(It.a,{raised:!0,className:a.transitionContainer},c&&r.a.createElement(nt,{node:c,isTransition:!0}),n)})),Mt=n(206),Lt=n(332),Dt=n.n(Lt),_t=Ie.a.get("graphLayoutProvider","dagre");function At(e,t){return"dagre"===_t?function(e,t){var n=Object.keys(e.nodes),a=new Dt.a.graphlib.Graph;a.setGraph({}),a.setDefaultEdgeLabel((function(){return{}})),n.forEach((function(n){var r=e.nodes[n],o=t[n];o?a.setNode(n,{label:r.label,width:o.width,height:o.height}):a.setNode(n,{label:r.label,width:10*r.label.length,height:50}),r.transitions.forEach((function(e){var t=e.condition?{label:e.condition.description,width:25,height:20}:{};a.setEdge(n,e.transition,t)}))})),Dt.a.layout(a);for(var r={},o=a.node("Start").x,i=0,c=n;i<c.length;i++){var l=c[i],u=a.node(l);r[l]={x:u.x-o-u.width/2,y:u.y-u.height/2,width:u.width}}var d={};return a.edges().forEach((function(e){var t=a.edge(e),n="".concat(e.v,", ").concat(e.w),r=t.label?{text:t.label,x:t.x-o,y:t.y}:null;d[n]={label:r,start:e.v,end:e.w,points:t.points.map((function(e){return{x:e.x-o,y:e.y}}))}})),{nodeCoordinates:r,edges:d}}(e,t):function(e){var t=function(e){var t,n={};for(t in e.nodes)n[t]={label:t,rank:NaN,horizontalPosition:NaN,children:[],parents:[],canMove:!0};return Object.keys(e.nodes).forEach((function(t){e.nodes[t].transitions.forEach((function(e){n[t].children.includes(e.transition)||n[t].children.push(e.transition),n[e.transition].parents.includes(t)||n[e.transition].parents.push(t)}))})),n.Start.rank=0,n}(e),n=[["Start"]],a=0;do{var r,o=Object($.a)(n[a]);try{for(o.s();!(r=o.n()).done;){var i=r.value;s(t[i],a+1)}}catch(p){o.e(p)}finally{o.f()}a++}while(n.length!==a);for(c(t.Start,-50),a=1;a<n.length;a++)l(a);return{nodeCoordinates:function(){var e={};for(var n in t){var a=t[n];e[n]={x:a.horizontalPosition,y:100*a.rank}}return e}(),edges:{}};function c(e,t){if(isNaN(e.horizontalPosition)||e.canMove){e.horizontalPosition=t;for(var n=1;u(e);){var a=n%2===0?-1:1;e.horizontalPosition=t+a*Math.ceil(n/2)*110,n+=1}}}function l(e){var a,r=Object($.a)(n[e]);try{var o=function(){var e=a.value,n=t[e];if(!isNaN(n.horizontalPosition))return"continue";var r=n.parents.filter((function(e){return t[e].rank<n.rank}));if(1===r.length){var o=n.parents[0],i=t[o];if(i.children.length%2===1)c(t[i.children[Math.floor(i.children.length/2)]],i.horizontalPosition);!function(e){var n=e.children.filter((function(e){return isNaN(t[e].horizontalPosition)||t[e].canMove}));if(0!==n.length)if(1!==n.length){n.length%2===1&&n.splice(Math.ceil(n.length/2),1);for(var a=0;a<n.length/2;a++){var r=t[n[n.length/2-a-1]];c(r,e.horizontalPosition-110*(a+1)),r.canMove=!1,c(r=t[n[n.length/2+a]],e.horizontalPosition+110*(a+1)),r.canMove=!1}}else c(t[n[0]],e.horizontalPosition)}(i)}else{var l=r.map((function(e){return t[e].horizontalPosition})).reduce((function(e,t){return e+t}),0);c(n,l/r.length)}};for(r.s();!(a=r.n()).done;)o()}catch(p){r.e(p)}finally{r.f()}}function u(e){var a,r=n[e.rank].map((function(e){return t[e]})),o=Object($.a)(r);try{for(o.s();!(a=o.n()).done;){if(d(e,a.value))return!0}}catch(p){o.e(p)}finally{o.f()}return!1}function d(e,t){return!function(e,t){return e.label===t.label}(e,t)&&(!isNaN(e.rank)&&!isNaN(e.horizontalPosition)&&!isNaN(t.rank)&&!isNaN(t.horizontalPosition)&&e.rank===t.rank&&e.horizontalPosition===t.horizontalPosition)}function s(e,a){e.children.forEach((function(r){var o=t[r];o.rank<e.rank?(n[o.rank].splice(n[o.rank].indexOf(r),1),m(r,a),s(o,a+1)):isNaN(o.rank)&&m(r,a)}))}function m(e,a){try{n[a].push(e)}catch(p){n[a]=[e]}finally{t[e].rank=a}}}(e)}var zt=n(151),Ft=n.n(zt),qt=n(208),Wt=n.n(qt),Ht=Object(a.memo)((function(e){var t=e.actionNode;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Gt,{actionNode:t}))})),Ut=function(e){var t=e.title,n=e.description;return n?r.a.createElement("tr",null,r.a.createElement("td",{className:Wt.a.descTitle},t),r.a.createElement("td",{className:Wt.a.desc},n)):null};var Gt=Object(a.memo)((function(e){var t=e.actionNode,n=X(t)&&function(e){var t=[];if(e.action[0]){var n,a,o=e.action[0].resource,i=void 0!==o.medicationCodeableConcept?null===o||void 0===o||null===(n=o.medicationCodeableConcept)||void 0===n?void 0:n.coding:null===o||void 0===o||null===(a=o.code)||void 0===a?void 0:a.coding,c=Z[o.resourceType]?Z[o.resourceType]:o.resourceType;t=[r.a.createElement(Ut,{key:"Description",title:"Description",description:e.action[0].description}),r.a.createElement(Ut,{key:"Type",title:"Type",description:c}),r.a.createElement(Ut,{key:"System",title:"System",description:i&&i[0].system&&r.a.createElement(r.a.Fragment,null,i[0].system,r.a.createElement("a",{href:i[0].system,target:"_blank",rel:"noopener noreferrer"},r.a.createElement(s.a,{icon:m.j,className:Wt.a.externalLink})))}),r.a.createElement(Ut,{key:"Code",title:"Code",description:i&&i[0].code}),r.a.createElement(Ut,{key:"Display",title:"Display",description:i&&i[0].display}),r.a.createElement(Ut,{key:"Title",title:"Title",description:o.title})]}return t}(t),a=Q(t)&&r.a.createElement(Ut,{key:"Type",title:"Type",description:"Observation"});return r.a.createElement("div",{className:"expandedNode"},r.a.createElement("table",{className:Wt.a.infoTable},r.a.createElement("tbody",null,n||a)))})),Kt=Ht,Jt=Object(a.memo)(Object(a.forwardRef)((function(e,t){var n=e.nodeKey,o=e.pathwayNode,i=e.xCoordinate,c=e.yCoordinate,l=e.expanded,u=void 0!==l&&l,s=e.onClick,m=e.nodeType,p=Fe().currentNode,b=Object(a.useState)(!!X(o)&&o.action.length>0),f=Object(d.a)(b,2),v=f[0],h=f[1],g=Object(a.useCallback)((function(){s&&s(n)}),[s,n]);Object(a.useEffect)((function(){!v&&X(o)&&o.action.length>0&&(h(!0),u||g())}),[v,o,h,g,u]);var y=o.label,E={top:c,left:i},C=o.key===(null===p||void 0===p?void 0:p.key),O=[Ft.a.node],j="";return u&&O.push("expanded"),C?(O.push(Ft.a.actionable),j=Ft.a.childActionable):j=Ft.a.childNotActionable,r.a.createElement("div",{className:O.join(" "),style:E,ref:t},r.a.createElement("div",{className:"nodeTitle ".concat(g&&"clickable"),onClick:g},r.a.createElement("div",{className:"iconAndLabel"},r.a.createElement(Vt,{pathwayNode:o,nodeType:m}),y),r.a.createElement(Yt,{status:null})),u&&r.a.createElement("div",{className:"".concat(Ft.a.expandedNode," ").concat(j)},r.a.createElement(Kt,{actionNode:o})))}))),Vt=function(e){var t,n=e.pathwayNode,a=e.nodeType;if("Start"===n.label)t=m.o;else if("action"===a){var o=n;if(o.action.length>0){var i=o.action[0].resource.resourceType;"MedicationRequest"===i?t=m.q:"ServiceRequest"===i?t=m.u:"CarePlan"===i&&(t=m.a)}}else"branch"===a&&(t=m.n);return t?r.a.createElement(s.a,{icon:t,className:Ft.a.icon}):null},Yt=function(e){var t=e.status;if(null==t)return null;var n=t?m.c:m.x;return r.a.createElement("div",{className:"statusIcon"},r.a.createElement(s.a,{icon:n,className:Ft.a.icon}))},$t=Jt,Xt=Object(q.a)((function(e){return{arrow:{"& path":{stroke:e.palette.primary.main,strokeWidth:2},"& text":{fontSize:"18px"}},currentArrow:{"& path":{stroke:e.palette.secondary.main}},arrowhead:{"& polygon":{fill:e.palette.primary.main}},currentArrowhead:{"& polygon":{fill:e.palette.secondary.main}}}}),{name:"Arrow",index:1}),Qt=function(e){var t=e.points,n=e.arrowheadId,a=e.widthOffset,o=t.map((function(e){return{x:e.x+a,y:e.y}})),i=o.length;o[i-1].y-=17.5;var c,l="M ".concat(o[0].x," ").concat(o[0].y," ");return c=i%3,l=o.reduce((function(e,t,n,a){return n%3!==c?e:"".concat(e," C ").concat(t.x," ").concat(t.y," ").concat(a[n+1].x," ").concat(a[n+1].y," ").concat(a[n+2].x,"\n        ").concat(a[n+2].y)}),l),r.a.createElement("path",{d:l,fill:"transparent",markerEnd:"url(#".concat(n,")")})},Zt=function(e){var t=e.edge,n=e.edgeName,a=e.widthOffset,o=e.currentNode,i=Xt(),c=t.start===o.key,l=n.replace(" ",""),u="arrowhead-".concat(l),d=t.label;return r.a.createElement("svg",{className:Object(Ze.a)(i.arrow,c&&i.currentArrow)},r.a.createElement(Qt,{points:t.points,arrowheadId:u,widthOffset:a}),d?d.text.length>12?r.a.createElement(tt.a,{title:d.text,"aria-label":"tooltip"},r.a.createElement("text",{x:d.x+a,y:d.y},d.text.substring(0,11)+"...")):r.a.createElement("text",{x:d.x+a,y:d.y},d.text):null,r.a.createElement("defs",null,r.a.createElement("marker",{id:u,className:Object(Ze.a)(c?i.currentArrowhead:i.arrowhead),markerWidth:"10",markerHeight:"7",refX:"0",refY:"3.5",orient:"auto"},r.a.createElement("polygon",{points:"0 0, 10 3.5, 0 7"}))))},en=n(1058),tn=n.n(en),nn=Object(a.memo)((function(e){var t=e.graphContainerWidth,n=e.interactive,o=void 0===n||n,i=K().pathway,c=Fe().currentNode,l=Object(a.useRef)({}),u=Object(a.useCallback)((function(){var e={};return(null===l||void 0===l?void 0:l.current)&&Object.keys(l.current).forEach((function(t){var n=l.current[t],a=n.clientWidth,r=Array.from(n.children).reduce((function(e,t){return e+t.clientHeight}),0);e[t]={width:a,height:r}})),i?At(i,e):{}}),[i]),s=Object(a.useState)(u()),m=Object(d.a)(s,2),p=m[0],b=m[1],f=p.nodeCoordinates,v=p.edges,h=Object(a.useMemo)((function(){return void 0!==f?Object.values(f).map((function(e){return e.y})).reduce((function(e,t){return Math.max(e,t)})):0}),[f]),g=void 0!==f?Object.values(f).map((function(e){return e.x+t/2})).reduce((function(e,t){return Math.min(e,t)})):0;if(g<0){var E=-1*g;Object.keys(f).forEach((function(e){f[e].x+=E})),Object.keys(v).forEach((function(e){var t=v[e];t.points.forEach((function(e){return e.x+=E})),t.label&&(t.label.x+=E)}))}var C=Object(a.useMemo)((function(){return void 0!==f?Object.values(f).map((function(e){var n;return e.x+t/2+(null!==(n=e.width)&&void 0!==n?n:0)})).reduce((function(e,t){return Math.max(e,t)})):0}),[f,t]),O=Object(a.useState)((function(){return Object.keys(p).reduce((function(e,t){return e[t]=!1,e}),{lastSelectedNode:null})})),j=Object(d.a)(O,2),k=j[0],x=j[1],w=Object(a.useCallback)((function(e){x("Start"===e?function(t){return Object(y.a)({},t,{lastSelectedNode:e})}:function(t){var n;return Object(y.a)({},t,(n={},Object(Mt.a)(n,e,t[e]&&t.lastSelectedNode!==e?t[e]:!t[e]),Object(Mt.a)(n,"lastSelectedNode",e),n))})}),[]);return Object(a.useEffect)((function(){b(u())}),[i,k,u]),i?c?r.a.createElement(an,{interactive:o,maxHeight:h,nodeCoordinates:f,edges:v,pathway:i,nodeRefs:l,parentWidth:t,maxWidth:C,expanded:k,toggleExpanded:w,currentNode:c}):r.a.createElement("div",null,"Error: No node selected"):r.a.createElement("div",null,"Error: No pathway loaded")})),an=Object(a.memo)((function(e){var t=e.interactive,n=e.maxHeight,o=e.nodeCoordinates,i=e.edges,c=e.pathway,l=e.nodeRefs,d=e.parentWidth,s=e.maxWidth,m=e.expanded,p=e.toggleExpanded,b=e.currentNode,f=Object(u.h)().id,v=Object(u.g)(),g=h().resetCurrentCriteria,y=Object(a.useCallback)((function(e){t&&(re(f,e,v),p(e),g())}),[p,g,t,v,f]);return r.a.createElement("div",{id:"graph-root",className:tn.a.root,style:{height:t?n+150:"inherit",width:s+"px",position:"relative",marginRight:"5px"}},void 0!==o?Object.keys(o).map((function(e){return Object.keys(c.nodes).includes(e)?r.a.createElement($t,{key:e,nodeKey:e,ref:function(t){t?l.current[e]=t:delete l.current[e]},pathwayNode:c.nodes[e],xCoordinate:o[e].x+d/2,yCoordinate:o[e].y,expanded:Boolean(m[e]),onClick:y,nodeType:Ne(c,e)}):null})):[],r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",style:{width:s+100,height:n,zIndex:1,top:0,left:0,overflow:"visible"}},void 0!==i?Object.keys(i).map((function(e){var t=i[e];return r.a.createElement(Zt,{key:e,edge:t,edgeName:e,widthOffset:d/2,currentNode:b})})):[]))})),rn=nn,on=Object(q.a)((function(e){return{root:{display:"flex",flexDirection:"column",padding:e.variables.spacing.globalPadding},elementContainer:{padding:"1em",marginRight:"10px",border:"0.1em solid",borderRadius:"0.2em",fontWeight:500,width:"auto",backgroundColor:e.palette.common.grayLighter},elementSelect:{display:"flex",alignItems:"center"},addElementLabel:{marginLeft:"1em",minWidth:"120px"},headerText:{marginRight:"10px",fontStyle:"italic",fontSize:"0.8em"},elementField:{display:"flex",alignItems:"center"},elementFieldLabel:{fontWeight:"bold",marginRight:"1em"}}}),{name:"CriteriaBuilder"}),cn=Object(a.memo)((function(){var e=jt(),t=e.selectedElement,n=e.selectedDemoElement,o=e.gender,i=e.minimumAge,c=e.maximumAge,l=e.setSelectedElement,u=e.setSelectedDemoElement,d=e.setGender,p=e.setMinimumAge,b=e.setMaximumAge,f=e.resetCriteriaBuilder,v=on(),g=h().setCurrentCriteriaCql,y=Object(a.useCallback)((function(e){l((null===e||void 0===e?void 0:e.target.value)||"")}),[l]),E=Object(a.useCallback)((function(e){u((null===e||void 0===e?void 0:e.target.value)||"")}),[u]),C=Object(a.useCallback)((function(e){d((null===e||void 0===e?void 0:e.target.value)||"")}),[d]),O=Object(a.useCallback)((function(e){p(parseInt(null===e||void 0===e?void 0:e.target.value)||0)}),[p]),j=Object(a.useCallback)((function(e){b(parseInt(null===e||void 0===e?void 0:e.target.value)||0)}),[b]),k=Object(a.useCallback)((function(){f(),g(null)}),[f,g]),x="The patient's gender is ".concat(o),w="The patient's age is between ".concat(i," years and ").concat(c," years");return Object(a.useEffect)((function(){var e="AgeInYears() >= ".concat(i," and AgeInYears() < ").concat(c);"Age Range"===n&&g(i>=0&&c>0&&i<c?{cql:e,text:w}:null)}),[n,i,c,w,g]),Object(a.useEffect)((function(){var e="Patient.gender.value = '".concat(o,"'");"Gender"===n&&g(""!==o?{cql:e,text:x}:null)}),[n,o,x,g]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:v.headerText},"Specify criteria to identify a target population that should receive a recommendation from this artifact. Examples might include an age range, gender, presence of a certain condition, or lab results within a specific range."),r.a.createElement("div",{className:v.elementContainer},(""===t||""===n)&&r.a.createElement("div",{className:v.elementSelect},r.a.createElement("div",{className:v.addElementLabel},r.a.createElement(s.a,{icon:m.p})," Add element"),r.a.createElement(Ue,{id:"Choose Element Type",label:"Choose Element Type",options:[{value:"Demographics",label:"Demographics"}],onChange:y,value:t}),t&&r.a.createElement(Ue,{id:"Select ".concat(t," element"),label:"Select ".concat(t," element"),options:[{value:"Age Range",label:"Age Range"},{value:"Gender",label:"Gender"}],onChange:E,value:n})),!(""===t||""===n)&&r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,n),r.a.createElement(F.a,{onClick:k},r.a.createElement(s.a,{icon:m.w})),r.a.createElement("hr",null),"Gender"===n&&r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,x),r.a.createElement(Ue,{id:"Select Gender",label:"Gender",options:[{label:"Male",value:"Male"},{label:"Female",value:"Female"},{label:"Other",value:"Other"},{label:"Unknown",value:"Unknown"}],onChange:C,value:o})),"Age Range"===n&&r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,w),r.a.createElement("div",{className:v.elementField},r.a.createElement("span",{className:v.elementFieldLabel},"Minimum Age:"),r.a.createElement(rt.a,{type:"number",value:i,onChange:O})),r.a.createElement("div",{className:v.elementField},r.a.createElement("span",{className:v.elementFieldLabel},"Maximum Age:"),r.a.createElement(rt.a,{type:"number",value:c,onChange:j}))))))})),ln=n(47),un={borderRadius:"0%",marginLeft:"1px",width:"50px",height:"50px"},dn=Object(q.a)((function(e){return{display:{display:"flex"},graph:{width:"100%",height:"100%","overflow-y":"scroll"},graphHeader:{display:"flex",height:"50px",backgroundColor:e.palette.common.white,marginLeft:"1px"},graphHeaderText:{height:"50px",display:"flex",width:"100%",backgroundColor:e.palette.primary.main,alignItems:"center",color:e.palette.common.white,fontSize:"1.4em",paddingLeft:"1.5em"},toggleButton:{"&-on":Object(y.a)({},un,{backgroundColor:e.palette.primary.main,"&:hover":{backgroundColor:Object(ln.a)(e.palette.primary.main,.1)}}),"&-off":Object(y.a)({},un,{backgroundColor:e.palette.text.primary,"&:hover":{backgroundColor:Object(ln.a)(e.palette.text.primary,.1)}})},toggleIcon:{transform:"rotate(90deg) scaleY(-1)",color:e.palette.common.white}}}),{name:"Builder",index:1}),sn=n(1059),mn=n.n(sn),pn=Object(a.memo)((function(){var e=dn(),t=K().pathway,n=h().currentCriteriaNodeId,o=Object(a.useRef)(null),i=function(e){var t=Object(a.useContext)(B).useProjector;return I({theme:e,useProjector:t})}("dark"),c=Object(a.useState)(!0),l=Object(d.a)(c,2),u=l[0],p=l[1],b=Object(a.useState)(null),f=Object(d.a)(b,2),v=f[0],y=f[1],E=Object(a.useState)(0),C=Object(d.a)(E,2),O=C[0],j=C[1],k=Object(a.useCallback)((function(){p(!u)}),[u]),x=Object(a.useCallback)((function(e){y(e),e&&j(e.clientWidth)}),[]);return Object(a.useEffect)((function(){v&&new mn.a(v,(function(){j(v.clientWidth)}))}),[v]),Object(a.useEffect)((function(){var e=function(){v&&(null===o||void 0===o?void 0:o.current)&&(v.style.height=window.innerHeight-o.current.clientHeight+"px")};return e(),window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[t,o,v]),Object(a.useEffect)((function(){u||""!==n||p(!0)}),[n,u]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{ref:o},r.a.createElement(z,null),r.a.createElement(Re,null)),t&&r.a.createElement("div",{className:e.display},r.a.createElement(g.a,{theme:i},r.a.createElement(Qe,{headerElement:o})),r.a.createElement("div",{ref:x,className:e.graph},""!==n&&r.a.createElement("div",{className:e.graphHeader},r.a.createElement("div",{className:e.graphHeaderText},r.a.createElement("span",null,"Criteria Builder")),r.a.createElement(F.a,{className:"".concat(e.toggleButton,"-").concat(u?"on":"off"),onClick:k},r.a.createElement(s.a,{className:e.toggleIcon,icon:m.r}))),""!==n&&u?r.a.createElement(cn,null):r.a.createElement(rn,{graphContainerWidth:O}))))})),bn=Object(a.memo)((function(){var e,t=Object(u.h)(),n=t.id,o=t.nodeId,i=De().pathways,c=K().setPathway,l=Fe().setCurrentNode,d=decodeURIComponent(n),s=Object(a.useMemo)((function(){return i.findIndex((function(e){return e.id===d}))}),[d,i]),m=i[s],p=null===m||void 0===m||null===(e=m.nodes)||void 0===e?void 0:e[decodeURIComponent(o)];return Object(a.useEffect)((function(){c(m)}),[m,c]),Object(a.useEffect)((function(){l(p)}),[p,l]),null==m?null:null==p?r.a.createElement(u.a,{to:"/builder/".concat(n,"/node/Start")}):r.a.createElement(pn,null)})),fn=Object(a.createContext)({}),vn=function(e){var t=e.children,n=Object(a.useState)(null),o=Object(d.a)(n,2),i=o[0],c=o[1];return r.a.createElement(fn.Provider,{value:{user:i,setUser:c}},t)},hn=n(209),gn=Object(q.a)((function(e){return{root:{display:"flex",flexDirection:"column"},label:{padding:"0.2em 2em",textTransform:"none",fontSize:"1.2em",fontWeight:100}}}),{name:"Tabs",index:1}),yn=Object(a.memo)((function(e){var t=e.tabs,n=gn();return r.a.createElement("div",{className:n.root},r.a.createElement(hn.d,null,r.a.createElement(hn.b,null,t.map((function(e){return r.a.createElement(hn.a,{key:V.a.generate()},r.a.createElement(Ke.a,{classes:{label:n.label}},e.label))}))),t.map((function(e){return r.a.createElement(hn.c,{key:V.a.generate()},e.component)}))))})),En=n(333),Cn=n.n(En),On=Object(a.memo)((function(){return r.a.createElement("div",{className:Cn.a.root},r.a.createElement(s.a,{icon:m.t,className:Cn.a.root,size:"4x",spin:!0}))})),jn=n(1532),kn=n(1533),xn=n(1534),wn=n(1535),Nn=n(1536),Sn=n(1537),Tn=n(1538),Rn=Object(q.a)((function(e){return{root:{display:"flex",flexDirection:"column",padding:e.variables.spacing.globalPadding},createPathwayButton:{alignSelf:"flex-end"},pathwayList:{marginTop:"2em"},pathwaysListButton:{marginRight:"1em"},dialogCloseButton:{float:"right",width:"45px"}}}),{name:"PathwaysList",index:1}),Pn=Object(a.memo)((function(e){var t,n,o=e.open,i=e.onClose,l=e.editPathway,d=!l,p=Rn(),b=Object(u.g)(),f=Object(a.useRef)(null),v=Object(a.useRef)(null),h=De(),g=h.addPathway,y=h.updatePathway,E=Object(a.useCallback)((function(e){b.push("/builder/".concat(encodeURIComponent(e),"/node/Start")),i()}),[b,i]),C=Object(a.useCallback)((function(e){var t,n,a,r;e.preventDefault();var o=V.a.generate(),i=null!==(t=null===(n=f.current)||void 0===n?void 0:n.value)&&void 0!==t?t:"",c=null!==(a=null===(r=v.current)||void 0===r?void 0:r.value)&&void 0!==a?a:"";g(function(e,t,n){return{id:null!==n&&void 0!==n?n:V.a.generate(),name:e,description:null!==t&&void 0!==t?t:"",library:"",preconditions:[],nodes:{Start:{key:"Start",label:"Start",transitions:[]}}}}(i,c,o)),E(o)}),[g,E]),O=Object(a.useCallback)((function(e){var t,n;if(e.preventDefault(),l&&((null===(t=f.current)||void 0===t?void 0:t.value)!==l.name||(null===(n=v.current)||void 0===n?void 0:n.value)!==l.description)){var a=Object(c.a)(l,(function(e){var t,n,a;(null===(t=f.current)||void 0===t?void 0:t.value)&&(e.name=null===(n=f.current)||void 0===n?void 0:n.value),e.description=null===(a=v.current)||void 0===a?void 0:a.value}));y(a)}i()}),[y,l,i]);if(l){t=l.name;var j=l.description;j&&""!==j&&(n=j)}return r.a.createElement(Nt.a,{open:o,onClose:i,"aria-labelledby":"create-pathway",fullWidth:!0,maxWidth:"md"},r.a.createElement(St.a,{disableTypography:!0},r.a.createElement(F.a,{"aria-label":"close",onClick:i,className:p.dialogCloseButton},r.a.createElement(s.a,{icon:m.w}))),r.a.createElement("form",{onSubmit:d?C:O},r.a.createElement(Tt.a,null,r.a.createElement(rt.a,{variant:"outlined",autoFocus:!0,label:"Pathway Name",fullWidth:!0,required:d,inputRef:f,defaultValue:d?void 0:t}),r.a.createElement(rt.a,{variant:"outlined",label:"Pathway Description",fullWidth:!0,inputRef:v,defaultValue:d?void 0:n,multiline:!0})),r.a.createElement(Rt.a,null,r.a.createElement(Ke.a,{variant:"contained",color:"primary",startIcon:d&&r.a.createElement(s.a,{icon:m.p}),type:"submit"},d?"Create":"Save"))))})),In=n(1516),Bn=n(1525),Mn=Object(q.a)((function(e){return{container:{display:"inline-block"},paper:{display:"flex",flexDirection:"row",alignItems:"center",borderRadius:"10px",border:"5px solid rgba(74, 74, 74, 0.5)",backgroundColor:e.palette.common.gray,color:e.palette.common.white,padding:"0.5em",mozBackgroundClip:"padding",webkitBackgroundVlip:"padding",backgroundClip:"padding-box"},displayText:{marginRight:"4em",whiteSpace:"nowrap"},buttons:{display:"flex",alignItems:"center",justifyContent:"center",minWidth:"2.5em",minHeight:"2em",cursor:"pointer",borderRadius:"15%",marginRight:"0.5em"}}}),{name:"ConfirmedDeletionButton"}),Ln=n(127),Dn=n.n(Ln),_n=function(e){var t=e.type,n=e.onClick;return r.a.createElement("button",{className:"".concat(Dn.a.largeActionButton," button ").concat("decline"===t&&Dn.a.largeDecline),type:"button",onClick:n},t[0].toUpperCase()+t.slice(1))},An=function(e){var t=e.type,n=e.onClick;return r.a.createElement("div",{className:"".concat("accept"===t?Dn.a.accept:Dn.a.decline," ").concat(Dn.a.smallActionButton),onClick:n,"data-testid":t},r.a.createElement(s.a,{icon:"accept"===t?m.b:m.w}))},zn=function(e){var t=e.type,n=e.onClick;return r.a.createElement("div",{className:"".concat("accept"===t?Dn.a.accept:Dn.a.decline," ").concat(Dn.a.mediumActionButton),onClick:n,"data-testid":t},r.a.createElement(s.a,{icon:"accept"===t?m.b:m.w}),{accept:"Submit",decline:"Cancel"}[t])},Fn=Object(a.memo)((function(e){var t=e.type,n=e.size,a=e.onClick;switch(n){case"small":return r.a.createElement(An,{type:t,onClick:a});case"large":return r.a.createElement(_n,{type:t,onClick:a});case"medium":return r.a.createElement(zn,{type:t,onClick:a})}})),qn=Object(a.memo)((function(e){var t=e.deleteId,n=e.deleteMethod,o=e.deleteType,i=e.deleteName,c=Mn(),l=Object(a.useState)(!1),u=Object(d.a)(l,2),p=u[0],b=u[1],f=Object(a.useState)(null),v=Object(d.a)(f,2),h=v[0],g=v[1],y="Are you sure"+(o&&n?" that you would like to delete the "+i+" "+o+" ?":"?"),E=Object(a.useCallback)((function(e){g(e.currentTarget),b(!0)}),[]),C=Object(a.useCallback)((function(){n(t),b(!1),g(null)}),[t,n]),O=Object(a.useCallback)((function(){b(!1),g(null)}),[]);return r.a.createElement("div",{className:c.container},r.a.createElement(Bn.a,{onClickAway:O},r.a.createElement(Ke.a,{color:"secondary",size:"small",startIcon:r.a.createElement(s.a,{icon:m.z}),onClick:E},"Delete")),r.a.createElement(In.a,{classes:{paper:c.paper},open:p,anchorEl:h,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},r.a.createElement("div",{className:c.displayText}," ",y," "),r.a.createElement("div",{className:c.buttons},r.a.createElement(Fn,{size:"small",type:"accept",onClick:C}),r.a.createElement(Fn,{size:"small",type:"decline",onClick:O}))))})),Wn=Object(a.memo)((function(){var e=Rn(),t=De(),n=t.pathways,o=t.deletePathway,i=K().setPathway,c=Object(a.useState)(!1),u=Object(d.a)(c,2),p=u[0],b=u[1],f=Object(a.useState)(),v=Object(d.a)(f,2),h=v[0],g=v[1],y=Object(a.useState)(null),E=Object(d.a)(y,2),C=E[0],O=E[1],j=Object(a.useCallback)((function(e){b(!0),g(e)}),[]),k=Object(a.useCallback)((function(){b(!1)}),[]),x=Object(a.useCallback)((function(e){O(e.currentTarget);var t=n.filter((function(t){return t.id===e.currentTarget.id}));t.length&&i(t[0])}),[n,i]),w=Object(a.useCallback)((function(){O(null)}),[]),N=Object(a.useCallback)((function(e){o(e)}),[o]);return r.a.createElement("div",null,r.a.createElement(jn.a,{className:e.pathwayList},r.a.createElement(kn.a,{"aria-label":"pathway list"},r.a.createElement(xn.a,null,r.a.createElement(wn.a,null,r.a.createElement(Nn.a,null,"Pathway Name"),r.a.createElement(Nn.a,null,"Status"),r.a.createElement(Nn.a,null,"Last Updated"),r.a.createElement(Nn.a,null))),r.a.createElement(Sn.a,null,n.map((function(t){return r.a.createElement(wn.a,{key:t.id},r.a.createElement(Nn.a,{component:"th",scope:"row"},r.a.createElement(Tn.a,{component:l.b,to:"/builder/".concat(encodeURIComponent(t.id)),color:"primary",underline:"none"},t.name)),r.a.createElement(Nn.a,null,"draft"),r.a.createElement(Nn.a,null,"2 days ago"),r.a.createElement(Nn.a,{align:"right"},r.a.createElement(Ke.a,{className:e.pathwaysListButton,color:"primary",size:"small",startIcon:r.a.createElement(s.a,{icon:m.g}),onClick:function(){return j(t)}},"Edit Info"),r.a.createElement(Ke.a,{id:t.id,className:e.pathwaysListButton,color:"primary",size:"small",startIcon:r.a.createElement(s.a,{icon:m.k}),onClick:x},"Export"),r.a.createElement(qn,{deleteType:"pathway",deleteName:t.name,deleteId:t.id,deleteMethod:N})))}))))),r.a.createElement(Te,{anchorEl:C,closeMenu:w}),r.a.createElement(Pn,{open:p,onClose:k,editPathway:h}))})),Hn=Object(a.memo)((function(){var e=Rn(),t=Object(a.useState)(!1),n=Object(d.a)(t,2),o=n[0],i=n[1],c=De().status,l=Object(a.useCallback)((function(){i(!0)}),[]),u=Object(a.useCallback)((function(){i(!1)}),[]);return r.a.createElement("div",{className:e.root},r.a.createElement(Ke.a,{className:e.createPathwayButton,variant:"contained",color:"primary",startIcon:r.a.createElement(s.a,{icon:m.p}),onClick:l},"Create Pathway"),r.a.createElement(Pn,{open:o,onClose:u}),"loading"===c?r.a.createElement(On,null):r.a.createElement(Wn,null))})),Un=n(1060),Gn=n.n(Un),Kn=Object(q.a)((function(e){return{root:{display:"flex",flexDirection:"column",padding:e.variables.spacing.globalPadding},buttonRow:{display:"flex",justifyContent:"flex-end"},buildCriteriaButton:{alignSelf:"flex-end",marginLeft:"20px"},criteriaList:{marginTop:"2em"},editButton:{marginRight:"1em"},dialogCloseButton:{float:"right",width:"45px"},input:{display:"none"},chooseFileInput:{display:"flex",alignItems:"center"},inputButton:{whiteSpace:"nowrap",marginRight:"1em"},fileName:{fontStyle:"italic"}}}),{name:"CriteriaList",index:1}),Jn=Object(a.memo)((function(){var e=Kn(),t=Et(),n=t.criteria,o=t.deleteCriteria,i=Object(a.useCallback)((function(e){o(e)}),[o]);return r.a.createElement(jn.a,{className:e.criteriaList},r.a.createElement(kn.a,{"aria-label":"criteria list"},r.a.createElement(xn.a,null,r.a.createElement(wn.a,null,r.a.createElement(Nn.a,null,"Criteria Name"),r.a.createElement(Nn.a,null,"Version"),r.a.createElement(Nn.a,null,"Added"),r.a.createElement(Nn.a,null))),r.a.createElement(Sn.a,null,n.map((function(t){return r.a.createElement(wn.a,{key:t.id},r.a.createElement(Nn.a,{component:"th",scope:"row"},t.label),r.a.createElement(Nn.a,null,t.version),r.a.createElement(Nn.a,null,(n=t.modified,Gn()(n).fromNow())),r.a.createElement(Nn.a,{align:"right"},r.a.createElement(Ke.a,{className:e.editButton,color:"primary",size:"small",startIcon:r.a.createElement(s.a,{icon:m.g})},"Edit"),r.a.createElement(qn,{deleteType:"criterion",deleteName:t.label,deleteId:t.id,deleteMethod:i})));var n})))))})),Vn=Object(a.memo)((function(e){var t=e.open,n=e.onClose,o=Kn(),i=Object(a.useState)(""),c=Object(d.a)(i,2),l=c[0],u=c[1],p=Object(a.useRef)(null),b=Et().addCriteria,f=Object(a.useCallback)((function(e){var t;e.preventDefault();var a=null===p||void 0===p||null===(t=p.current)||void 0===t?void 0:t.files;(null===a||void 0===a?void 0:a.length)&&b(a[0]),n(),u("")}),[b,n]),v=Object(a.useCallback)((function(){var e,t;(null===p||void 0===p||null===(e=p.current)||void 0===e||null===(t=e.files)||void 0===t?void 0:t[0])&&u(p.current.files[0].name)}),[p]);return r.a.createElement(Nt.a,{open:t,onClose:n,"aria-labelledby":"import-criteria",fullWidth:!0,maxWidth:"sm"},r.a.createElement(St.a,{disableTypography:!0},r.a.createElement(F.a,{"aria-label":"close",onClick:n,className:o.dialogCloseButton},r.a.createElement(s.a,{icon:m.w}))),r.a.createElement("form",{onSubmit:f},r.a.createElement(Tt.a,null,r.a.createElement("div",{className:o.chooseFileInput},r.a.createElement(et.a,{id:"choose-file-input",className:o.input,inputRef:p,type:"file",inputProps:{accept:".json"},onChange:v}),r.a.createElement("label",{htmlFor:"choose-file-input"},r.a.createElement(Ke.a,{className:o.inputButton,variant:"contained",color:"primary",component:"span"},"Choose File")),r.a.createElement("div",{className:o.fileName},l?r.a.createElement("span",null,l):r.a.createElement("span",null,"Choose ELM file to import.")))),r.a.createElement(Rt.a,null,r.a.createElement(Ke.a,{variant:"contained",color:"primary",startIcon:r.a.createElement(s.a,{icon:m.l}),type:"submit"},"Import"))))})),Yn=Object(a.memo)((function(){var e=Kn(),t=De().status,n=Object(a.useState)(!1),o=Object(d.a)(n,2),i=o[0],c=o[1],l=Object(a.useCallback)((function(){c(!0)}),[]),u=Object(a.useCallback)((function(){c(!1)}),[]);return r.a.createElement("div",{className:e.root},r.a.createElement("div",{className:e.buttonRow},r.a.createElement(Ke.a,{className:e.buildCriteriaButton,variant:"contained",color:"primary",startIcon:r.a.createElement(s.a,{icon:m.l}),onClick:l},"Import Library"),r.a.createElement(Ke.a,{className:e.buildCriteriaButton,variant:"contained",color:"primary",startIcon:r.a.createElement(s.a,{icon:m.y})},"Build Criteria")),r.a.createElement(Vn,{open:i,onClose:u}),"loading"===t?r.a.createElement(On,null):r.a.createElement(Jn,null))})),$n=Object(a.memo)((function(){return r.a.createElement(M,{theme:"light"},r.a.createElement(vn,null,r.a.createElement(G,null,r.a.createElement(Le,null,r.a.createElement(ze,null,r.a.createElement(yt,null,r.a.createElement(Ve,null,r.a.createElement(v,null,r.a.createElement(Ot,null,r.a.createElement(l.a,null,r.a.createElement(u.d,null,r.a.createElement(u.b,{path:"/builder/:id/node/:nodeId"},r.a.createElement(bn,null)),r.a.createElement(u.b,{path:"/builder/:id"},r.a.createElement(bn,null)),r.a.createElement(u.b,{path:"/"},r.a.createElement(z,null),r.a.createElement(yn,{tabs:[{label:"Pathway",component:r.a.createElement(Hn,null)},{label:"Criteria",component:r.a.createElement(Yn,null)}]})))))))))))))}));n(1484);Object(c.b)(),i.a.render(r.a.createElement($n,null),document.getElementById("root"))},151:function(e,t,n){e.exports={node:"Node_node__38uoJ",icon:"Node_icon__354W4",actionable:"Node_actionable__bHXKd",expandedNode:"Node_expandedNode__1ar-A",childNotActionable:"Node_childNotActionable__1bfBq",childActionable:"Node_childActionable__SwUjD"}},208:function(e,t,n){e.exports={infoTable:"ExpandedNode_infoTable__3v2tx",descTitle:"ExpandedNode_descTitle__15ki8",desc:"ExpandedNode_desc__3Xdkf",externalLink:"ExpandedNode_externalLink__1Mr1x",defaultTextButton:"ExpandedNode_defaultTextButton__2Bvq6",commentsForm:"ExpandedNode_commentsForm__3Q20Y",footer:"ExpandedNode_footer__FOCYI",comments:"ExpandedNode_comments__9q-JW"}},259:function(e,t,n){e.exports={logo:"Header_logo__3T0lc",homeLink:"Header_homeLink__2ew4r"}},333:function(e,t,n){e.exports={root:"Loading_root__3b6qy"}}},[[1078,1,2]]]);
//# sourceMappingURL=main.b2381a5a.chunk.js.map